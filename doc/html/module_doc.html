

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta content="kafe - a general, Python-based approach to fit a model function to two-dimensional data points with correlated uncertainties in both dimensions" lang="en" name="description" />
<meta content="index, follow" name="robots" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>kafe reference &mdash; kafe 1.2.0 documentation</title>
  

  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  

  

  
    <link rel="top" title="kafe 1.2.0 documentation" href="index.html"/>
        <link rel="prev" title="Fit examples, utilities, tips and tricks" href="examples.html"/> 

  
  <script src="_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-nav-search">
        

        
          <a href="index.html" class="icon icon-home"> kafe
        

        
        </a>

        
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

        
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
        
          
          
              <p class="caption"><span class="caption-text">Table of Contents</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="index.html">Welcome to kafe, the Karlsruhe Fit Environment</a></li>
<li class="toctree-l1"><a class="reference internal" href="installation.html">Installing <em>kafe</em></a></li>
<li class="toctree-l1"><a class="reference internal" href="examples.html">Fit examples, utilities, tips and tricks</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href=""><em>kafe</em> reference</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#module-kafe.__init__"><em>kafe</em> in a nutshell</a></li>
<li class="toctree-l2"><a class="reference internal" href="#main-modules-dataset-fit-and-plot">Main modules: <code class="docutils literal"><span class="pre">dataset</span></code>, <code class="docutils literal"><span class="pre">fit</span></code> and <code class="docutils literal"><span class="pre">plot</span></code></a><ul>
<li class="toctree-l3"><a class="reference internal" href="#module-kafe.dataset"><code class="docutils literal"><span class="pre">Dataset</span></code>: Collection of data points (<code class="docutils literal"><span class="pre">kafe.dataset</span></code>)</a></li>
<li class="toctree-l3"><a class="reference internal" href="#module-kafe.fit"><code class="docutils literal"><span class="pre">Fit</span></code>: Fit of model functions to a <code class="docutils literal"><span class="pre">Dataset</span></code> (<code class="docutils literal"><span class="pre">kafe.fit</span></code>)</a></li>
<li class="toctree-l3"><a class="reference internal" href="#module-kafe.plot"><code class="docutils literal"><span class="pre">Plot</span></code>: Graphical representation of a <code class="docutils literal"><span class="pre">Fit</span></code> (<code class="docutils literal"><span class="pre">kafe.plot</span></code>)</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#interfaces-to-external-packages">Interfaces to external packages</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#module-kafe.minuit">Interface to ROOT&#8217;s <code class="docutils literal"><span class="pre">TMinuit</span></code> (<code class="docutils literal"><span class="pre">kafe.minuit</span></code>)</a></li>
<li class="toctree-l3"><a class="reference internal" href="#module-kafe.iminuit_wrapper">Interface to <code class="docutils literal"><span class="pre">iminuit</span></code> (<code class="docutils literal"><span class="pre">kafe.iminuit_wrapper</span></code>)</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#kafe-configuration"><em>kafe</em> configuration</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#module-kafe.config"><em>kafe</em> configuration (<code class="docutils literal"><span class="pre">kafe.config</span></code>)</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#modules-with-helper-tools">Modules with helper tools</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#module-kafe.dataset_tools">For building datasets (<code class="docutils literal"><span class="pre">kafe.dataset_tools</span></code>)</a></li>
<li class="toctree-l3"><a class="reference internal" href="#module-kafe.file_tools">For parsing files (<code class="docutils literal"><span class="pre">kafe.file_tools</span></code>)</a></li>
<li class="toctree-l3"><a class="reference internal" href="#module-kafe.function_tools">For specifying and decorating fit functions (<code class="docutils literal"><span class="pre">kafe.function_tools</span></code>)</a></li>
<li class="toctree-l3"><a class="reference internal" href="#module-kafe.latex_tools">For working with LaTeX strings (<code class="docutils literal"><span class="pre">kafe.latex_tools</span></code>)</a></li>
<li class="toctree-l3"><a class="reference internal" href="#module-kafe.numeric_tools">For routine numeric tasks (<code class="docutils literal"><span class="pre">kafe.numeric_tools</span></code>)</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#auxilliary-modules">Auxilliary modules</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#module-kafe.function_library">Collection of ready-to-use fit functions (<code class="docutils literal"><span class="pre">kafe.function_library</span></code>)</a></li>
<li class="toctree-l3"><a class="reference internal" href="#module-kafe.stream">File/stream manipulation (<code class="docutils literal"><span class="pre">kafe.stream</span></code>)</a></li>
</ul>
</li>
</ul>
</li>
</ul>

          
        
      </div>
      &nbsp;
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="index.html">kafe</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="index.html">Docs</a> &raquo;</li>
      
    <li><em>kafe</em> reference</li>
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="_sources/module_doc.txt" rel="nofollow"> View page source</a>
          
        
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="kafe-reference">
<h1><em>kafe</em> reference<a class="headerlink" href="#kafe-reference" title="Permalink to this headline">¶</a></h1>
<p>This page contains documentation which was automatically extracted from
docstrings in the source code. All major classes, methods and functions
provided by <em>kafe</em> are documented here. For further information, or if in
doubt about the exact functionality, users are invited to consult the source
code itself.</p>
<div class="section" id="module-kafe.__init__">
<span id="kafe-in-a-nutshell"></span><h2><em>kafe</em> in a nutshell<a class="headerlink" href="#module-kafe.__init__" title="Permalink to this headline">¶</a></h2>
<p><strong>kafe</strong> <em>&#8211; a Python package for fitting and plotting for use in physics lab
courses.</em></p>
<p>This Python package allows fitting of user-defined functions to data. A dataset
is represented by a <cite>Dataset</cite> object which stores measurement data as <cite>NumPy</cite>
arrays. The uncertainties (errors) of the data are also stored in the <cite>Dataset</cite>
as a list of one or more <cite>ErrorSource</cite> objects, each of which stores a part of
the uncertainty information as a so-called <em>covariance matrix</em> (also called an
<em>error matrix</em>). This allows <strong>kafe</strong> to work with uncertainties of different
kinds for a <cite>Dataset</cite>, particularly when there is a degree of correlation
between the uncertainties of the datapoints.</p>
<p>Fitting with <strong>kafe</strong> in a nutshell goes like this:</p>
<blockquote>
<div><ol class="arabic simple">
<li>create a <cite>Dataset</cite> object from your measurement data</li>
</ol>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">my_d</span> <span class="o">=</span> <span class="n">kafe</span><span class="o">.</span><span class="n">Dataset</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="p">[[</span><span class="mf">0.</span><span class="p">,</span> <span class="mf">1.</span><span class="p">,</span> <span class="mf">2.</span><span class="p">],</span> <span class="p">[</span><span class="mf">1.23</span><span class="p">,</span> <span class="mf">3.45</span><span class="p">,</span> <span class="mf">5.62</span><span class="p">]])</span>
</pre></div>
</div>
<ol class="arabic simple" start="2">
<li>add errors (uncertainties) to your <cite>Dataset</cite></li>
</ol>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">my_d</span><span class="o">.</span><span class="n">add_error_source</span><span class="p">(</span><span class="s">&#39;y&#39;</span><span class="p">,</span> <span class="s">&#39;simple&#39;</span><span class="p">,</span> <span class="mf">0.5</span><span class="p">)</span>  <span class="c"># y errors, all +/- 0.5</span>
</pre></div>
</div>
<ol class="arabic simple" start="3">
<li>import a model function from <cite>kafe.function_library</cite> (or define one
yourself)</li>
</ol>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">kafe.function_library</span> <span class="kn">import</span> <span class="n">linear_2par</span>
</pre></div>
</div>
<ol class="arabic simple" start="4">
<li>create a <cite>Fit</cite> object from your <cite>Dataset</cite> and your model function</li>
</ol>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">my_f</span> <span class="o">=</span> <span class="n">kafe</span><span class="o">.</span><span class="n">Fit</span><span class="p">(</span><span class="n">my_d</span><span class="p">,</span> <span class="n">linear_2par</span><span class="p">)</span>
</pre></div>
</div>
<ol class="arabic simple" start="5">
<li>do the fit</li>
</ol>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">my_f</span><span class="o">.</span><span class="n">do_fit</span><span class="p">()</span>
</pre></div>
</div>
<ol class="arabic simple" start="6">
<li><em>(optional)</em> if you want to see a plot of the result, use the <cite>Plot</cite>
object</li>
</ol>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">my_p</span> <span class="o">=</span> <span class="n">kafe</span><span class="o">.</span><span class="n">Plot</span><span class="p">(</span><span class="n">my_f</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">my_p</span><span class="o">.</span><span class="n">plot_all</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">my_p</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div></blockquote>
<p>For more in-depth information on <strong>kafe</strong>&#8216;s features, feel free to consult the
documentation.</p>
</div>
<div class="section" id="main-modules-dataset-fit-and-plot">
<h2>Main modules: <a class="reference internal" href="#module-kafe.dataset" title="kafe.dataset"><code class="xref py py-mod docutils literal"><span class="pre">dataset</span></code></a>, <a class="reference internal" href="#module-kafe.fit" title="kafe.fit"><code class="xref py py-mod docutils literal"><span class="pre">fit</span></code></a> and <a class="reference internal" href="#module-kafe.plot" title="kafe.plot"><code class="xref py py-mod docutils literal"><span class="pre">plot</span></code></a><a class="headerlink" href="#main-modules-dataset-fit-and-plot" title="Permalink to this headline">¶</a></h2>
<div class="section" id="module-kafe.dataset">
<span id="dataset-collection-of-data-points-kafe-dataset"></span><h3><code class="docutils literal"><span class="pre">Dataset</span></code>: Collection of data points (<a class="reference internal" href="#module-kafe.dataset" title="kafe.dataset"><code class="xref py py-mod docutils literal"><span class="pre">kafe.dataset</span></code></a>)<a class="headerlink" href="#module-kafe.dataset" title="Permalink to this headline">¶</a></h3>
<span class="target" id="module-dataset"></span><dl class="class">
<dt id="kafe.dataset.Dataset">
<em class="property">class </em><code class="descclassname">kafe.dataset.</code><code class="descname">Dataset</code><span class="sig-paren">(</span><em>data=None, title='Untitled Dataset', axis_labels=['x', 'y'], axis_units=['', ''], **kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#kafe.dataset.Dataset" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal"><span class="pre">object</span></code></p>
<p>The <cite>Dataset</cite> object is a data structure for storing measurement and error
data.</p>
<p>It contains the measurement <cite>data</cite> as <em>NumPy</em> arrays and the error
information as a list of <a class="reference internal" href="#kafe.dataset.ErrorSource" title="kafe.dataset.ErrorSource"><code class="xref py py-class docutils literal"><span class="pre">ErrorSource</span></code></a> objects for
each axis, each of which represents a separate contribution to the
uncertainty of the measurement data, expressed as a <em>covariance matrix</em>.</p>
<p>The <cite>Dataset</cite> object calculates a <em>total covariance matrix</em> by adding
up all the individual <cite>ErrorSource</cite> covariance matrices. This
<em>total covariance matrix</em> is the one used for fitting.</p>
<p>A <cite>Dataset</cite> can be constructed directly from the measurement data, and can
optionally be given a <em>title</em>, <em>axis labels</em> and <em>axis units</em>, as well as
a <em>base name</em> for log or output files:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">my_d</span> <span class="o">=</span> <span class="n">kafe</span><span class="o">.</span><span class="n">Dataset</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="p">[[</span><span class="mf">0.</span><span class="p">,</span> <span class="mf">1.</span><span class="p">,</span> <span class="mf">2.</span><span class="p">],</span> <span class="p">[</span><span class="mf">1.23</span><span class="p">,</span> <span class="mf">3.45</span><span class="p">,</span> <span class="mf">5.62</span><span class="p">]])</span>
</pre></div>
</div>
<p>After constructing the <cite>Dataset</cite>, an error model may be added using
<a class="reference internal" href="#kafe.dataset.Dataset.add_error_source" title="kafe.dataset.Dataset.add_error_source"><code class="xref py py-meth docutils literal"><span class="pre">add_error_source()</span></code></a> (here, an absolute
<em>y</em>-uncertainty of 0.5):</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">my_d</span><span class="o">.</span><span class="n">add_error_source</span><span class="p">(</span><span class="s">&#39;y&#39;</span><span class="p">,</span> <span class="s">&#39;simple&#39;</span><span class="p">,</span> <span class="mf">0.5</span><span class="p">)</span>  <span class="c"># y errors, all +/- 0.5</span>
</pre></div>
</div>
<p>The <cite>Dataset</cite> may then be used for fitting. For more information, see the
<a class="reference internal" href="#kafe.fit.Fit" title="kafe.fit.Fit"><code class="xref py py-class docutils literal"><span class="pre">Fit</span></code></a> object documentation.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name" colspan="2">Keyword Arguments:</th></tr>
<tr class="field-odd field"><td>&nbsp;</td><td class="field-body"><ul class="first last">
<li><p class="first"><strong>data</strong> (<em>iterable, optional</em>) &#8211;
the measurement data. Either of the form (xdata, ydata) or
[(x1, y1), (x2, y2),... (xn, yn)]</p>
</li>
<li><p class="first"><strong>title</strong> (<em>string, optional</em>) &#8211;
the name of the <cite>Dataset</cite>. If omitted, the <cite>Dataset</cite> will be given the
generic name &#8216;Untitled Dataset&#8217;.</p>
</li>
<li><p class="first"><strong>axis_labels</strong> (<em>list of strings, optional</em>) &#8211;</p>
<p>labels for the <cite>x</cite> and <cite>y</cite> axes. If omitted, these will be set to
<code class="docutils literal"><span class="pre">'x'</span></code> and <code class="docutils literal"><span class="pre">'y'</span></code>, respectively.</p>
</li>
<li><p class="first"><strong>axis_units</strong> (<em>list of strings, optional</em>) &#8211;</p>
<p>units for the <cite>x</cite> and <cite>y</cite> axes. If omitted, these will be assumed to be
dimensionless, i.e. the unit will be an empty string.</p>
</li>
<li><p class="first"><strong>basename</strong> (<em>string</em>) &#8211;</p>
<p>base name of files generated by this Dataset/subsequent Fits...</p>
</li>
</ul>
</td>
</tr>
</tbody>
</table>
<dl class="method">
<dt id="kafe.dataset.Dataset.add_error_source">
<code class="descname">add_error_source</code><span class="sig-paren">(</span><em>axis</em>, <em>err_type</em>, <em>err_val</em>, <em>relative=False</em>, <em>correlated=False</em>, <em>recompute_cov_mat=True</em><span class="sig-paren">)</span><a class="headerlink" href="#kafe.dataset.Dataset.add_error_source" title="Permalink to this definition">¶</a></dt>
<dd><p>Add an error source for the data. A <cite>Dataset</cite> can have many
error sources for each axis, each corresponding to a covariance matrix.
The total error model for the axis is represented by the sum of
these matrices.</p>
<p>Note: whenever an ErrorSource is added, the total covariance matrix
is (re-)calculated, unless <em>recompute_cov_mat</em> is <code class="docutils literal"><span class="pre">False</span></code>.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>axis</strong> (<code class="docutils literal"><span class="pre">'x'</span></code> or <code class="docutils literal"><span class="pre">'y'</span></code>) &#8211; axis for which to add error source.</li>
<li><strong>err_type</strong> (<code class="docutils literal"><span class="pre">'simple'</span></code> or <code class="docutils literal"><span class="pre">'matrix'</span></code>) &#8211; <p>a <code class="docutils literal"><span class="pre">'simple'</span></code> error source is constructed from a single float or
a list of <em>N</em> floats (<em>N</em> being the size of the <cite>Dataset</cite>),
representing the uncertainty of the corresponding data points.</p>
<p>A <code class="docutils literal"><span class="pre">'matrix'</span></code> error source is a user-constructed covariance
matrix.</p>
</li>
<li><strong>err_val</strong> (float/list of floats <em>or</em> numpy.matrix) &#8211; <p>for a <code class="docutils literal"><span class="pre">'simple'</span></code> error source, a float of a list of <em>N</em> floats
(<em>N</em> being the size of the <cite>Dataset</cite>). The float/each float in the
list represents the uncertainty of the corresponding data point.</p>
<p>For a <code class="docutils literal"><span class="pre">'matrix'</span></code> error source, the user-constructed covariance
matrix (type: <cite>numpy.matrix</cite>).</p>
</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">Keyword Arguments:</th></tr>
<tr class="field-even field"><td>&nbsp;</td><td class="field-body"><ul class="first simple">
<li><strong>relative</strong> (boolean, optional, default <code class="docutils literal"><span class="pre">False</span></code>) &#8211;
errors relative to the data (<code class="docutils literal"><span class="pre">True</span></code>) or absolute (<code class="docutils literal"><span class="pre">False</span></code>).</li>
<li><strong>correlated</strong> (boolean, optional, default <code class="docutils literal"><span class="pre">False</span></code>) &#8211;
errors fully correlated (<code class="docutils literal"><span class="pre">True</span></code>) or totally uncorrelated
(<code class="docutils literal"><span class="pre">False</span></code>).</li>
<li><strong>recompute_cov_mat</strong> (boolean, optional, default <code class="docutils literal"><span class="pre">True</span></code>) &#8211;
recalculate the total covariance matrix after adding the error
source</li>
</ul>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">this integer may later be used to remove or disable/enable the
error source using
<a class="reference internal" href="#kafe.dataset.Dataset.remove_error_source" title="kafe.dataset.Dataset.remove_error_source"><code class="xref py py-meth docutils literal"><span class="pre">remove_error_source()</span></code></a>,
<a class="reference internal" href="#kafe.dataset.Dataset.disable_error_source" title="kafe.dataset.Dataset.disable_error_source"><code class="xref py py-meth docutils literal"><span class="pre">disable_error_source()</span></code></a> or
<a class="reference internal" href="#kafe.dataset.Dataset.enable_error_source" title="kafe.dataset.Dataset.enable_error_source"><code class="xref py py-meth docutils literal"><span class="pre">enable_error_source()</span></code></a>.</p>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last">int</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="kafe.dataset.Dataset.calc_cov_mats">
<code class="descname">calc_cov_mats</code><span class="sig-paren">(</span><em>axis='all'</em><span class="sig-paren">)</span><a class="headerlink" href="#kafe.dataset.Dataset.calc_cov_mats" title="Permalink to this definition">¶</a></dt>
<dd><p>(Re-)Calculate the covariance matrix from the enabled error sources.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name" colspan="2">Keyword Arguments:</th></tr>
<tr class="field-odd field"><td>&nbsp;</td><td class="field-body"><strong>axis</strong> (<code class="docutils literal"><span class="pre">'x'</span></code> or <code class="docutils literal"><span class="pre">'y'</span></code> or <code class="docutils literal"><span class="pre">'all'</span></code>) &#8211;
axis/axes for which to (re-)calcuate covariance matrix.</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="kafe.dataset.Dataset.cov_mat_is_regular">
<code class="descname">cov_mat_is_regular</code><span class="sig-paren">(</span><em>axis</em><span class="sig-paren">)</span><a class="headerlink" href="#kafe.dataset.Dataset.cov_mat_is_regular" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns <cite>True</cite> if the covariance matrix for an axis is regular and
<code class="docutils literal"><span class="pre">False</span></code> if it is singular.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>axis</strong> (<code class="docutils literal"><span class="pre">'x'</span></code> or <code class="docutils literal"><span class="pre">'y'</span></code>) &#8211; Axis for which to check for regularity of the covariance matrix.</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><code class="docutils literal"><span class="pre">True</span></code> if covariance matrix is regular</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body">boolean</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="attribute">
<dt id="kafe.dataset.Dataset.cov_mats">
<code class="descname">cov_mats</code><em class="property"> = None</em><a class="headerlink" href="#kafe.dataset.Dataset.cov_mats" title="Permalink to this definition">¶</a></dt>
<dd><p>covariance matrices for axes</p>
</dd></dl>

<dl class="method">
<dt id="kafe.dataset.Dataset.disable_error_source">
<code class="descname">disable_error_source</code><span class="sig-paren">(</span><em>axis</em>, <em>err_src_id</em><span class="sig-paren">)</span><a class="headerlink" href="#kafe.dataset.Dataset.disable_error_source" title="Permalink to this definition">¶</a></dt>
<dd><p>Disables an ErrorSource by excluding it from the calculation of the
total covariance matrix.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>axis</strong> (<code class="docutils literal"><span class="pre">'x'</span></code> or <code class="docutils literal"><span class="pre">'y'</span></code>) &#8211; axis for which to add error source.</li>
<li><strong>err_src_id</strong> (<em>int</em>) &#8211; error source ID, as returned by
<a class="reference internal" href="#kafe.dataset.Dataset.add_error_source" title="kafe.dataset.Dataset.add_error_source"><code class="xref py py-meth docutils literal"><span class="pre">add_error_source()</span></code></a>.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="kafe.dataset.Dataset.enable_error_source">
<code class="descname">enable_error_source</code><span class="sig-paren">(</span><em>axis</em>, <em>err_src_id</em><span class="sig-paren">)</span><a class="headerlink" href="#kafe.dataset.Dataset.enable_error_source" title="Permalink to this definition">¶</a></dt>
<dd><p>Enables an ErrorSource by excluding it from the calculation of the
total covariance matrix.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>axis</strong> (<code class="docutils literal"><span class="pre">'x'</span></code> or <code class="docutils literal"><span class="pre">'y'</span></code>) &#8211; axis for which to add error source.</li>
<li><strong>err_src_id</strong> (<em>int</em>) &#8211; error source ID, as returned by
<a class="reference internal" href="#kafe.dataset.Dataset.add_error_source" title="kafe.dataset.Dataset.add_error_source"><code class="xref py py-meth docutils literal"><span class="pre">add_error_source()</span></code></a>.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="attribute">
<dt id="kafe.dataset.Dataset.err_src">
<code class="descname">err_src</code><em class="property"> = None</em><a class="headerlink" href="#kafe.dataset.Dataset.err_src" title="Permalink to this definition">¶</a></dt>
<dd><p>lists of ErrorSource objects</p>
</dd></dl>

<dl class="method">
<dt id="kafe.dataset.Dataset.error_source_is_enabled">
<code class="descname">error_source_is_enabled</code><span class="sig-paren">(</span><em>axis</em>, <em>err_src_id</em><span class="sig-paren">)</span><a class="headerlink" href="#kafe.dataset.Dataset.error_source_is_enabled" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns <code class="docutils literal"><span class="pre">True</span></code> if an ErrorSource is enabled, that is if it is included
in the total covariance matrix.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>axis</strong> (<code class="docutils literal"><span class="pre">'x'</span></code> or <code class="docutils literal"><span class="pre">'y'</span></code>) &#8211; Axis for which to load the error matrix.</li>
<li><strong>err_src_id</strong> (<em>int</em>) &#8211; error source ID, as returned by
<a class="reference internal" href="#kafe.dataset.Dataset.add_error_source" title="kafe.dataset.Dataset.add_error_source"><code class="xref py py-meth docutils literal"><span class="pre">add_error_source()</span></code></a>.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last"><ul class="simple">
<li><em>bool</em> &#8211;
<cite>True</cite> if the specified error source is enables</li>
<li><strong>TODO</strong> (<em>##DocString##</em>)</li>
</ul>
</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="kafe.dataset.Dataset.get_axis">
<code class="descname">get_axis</code><span class="sig-paren">(</span><em>axis_alias</em><span class="sig-paren">)</span><a class="headerlink" href="#kafe.dataset.Dataset.get_axis" title="Permalink to this definition">¶</a></dt>
<dd><p>Get axis id from an alias.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>axis_alias</strong> (<em>string or int</em>) &#8211; Alias of the axis whose id should be returned. This is for example
either <code class="docutils literal"><span class="pre">'0'</span></code> or <code class="docutils literal"><span class="pre">'x'</span></code> for the <cite>x</cite>-axis (id 0).</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">the axis ID</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body">int</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="kafe.dataset.Dataset.get_cov_mat">
<code class="descname">get_cov_mat</code><span class="sig-paren">(</span><em>axis</em>, <em>fallback_on_singular=None</em><span class="sig-paren">)</span><a class="headerlink" href="#kafe.dataset.Dataset.get_cov_mat" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the error matrix for an axis.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>axis</strong> (<code class="docutils literal"><span class="pre">'x'</span></code> or <code class="docutils literal"><span class="pre">'y'</span></code>) &#8211; Axis for which to load the error matrix.</td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">Keyword Arguments:</th></tr>
<tr class="field-even field"><td>&nbsp;</td><td class="field-body"><strong>fallback_on_singular</strong> (<cite>numpy.matrix</cite> or string, optional) &#8211;
What to return if the matrix is singular. If this is <code class="docutils literal"><span class="pre">None</span></code>
(default), the matrix is returned anyway. If this is a
<cite>numpy.matrix</cite> object or similar, that is returned istead.
Alternatively, the shortcuts <code class="docutils literal"><span class="pre">'identity'</span></code> or <code class="docutils literal"><span class="pre">1</span></code> and <code class="docutils literal"><span class="pre">'zero'</span></code>
or <code class="docutils literal"><span class="pre">0</span></code> can be used to return the identity and zero matrix
respectively.</td>
</tr>
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">the current covariance matrix</td>
</tr>
<tr class="field-even field"><th class="field-name">Return type:</th><td class="field-body"><em>numpy.matrix</em></td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="kafe.dataset.Dataset.get_data">
<code class="descname">get_data</code><span class="sig-paren">(</span><em>axis</em><span class="sig-paren">)</span><a class="headerlink" href="#kafe.dataset.Dataset.get_data" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the measurement data for an axis.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>axis</strong> (<em>string</em>) &#8211; Axis for which to get the measurement data. Can be <code class="docutils literal"><span class="pre">'x'</span></code> or
<code class="docutils literal"><span class="pre">'y'</span></code>.</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">the measurement data for the axis</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><em>numpy.array</em></td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="kafe.dataset.Dataset.get_data_span">
<code class="descname">get_data_span</code><span class="sig-paren">(</span><em>axis</em>, <em>include_error_bars=False</em><span class="sig-paren">)</span><a class="headerlink" href="#kafe.dataset.Dataset.get_data_span" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the data span for an axis. The data span is a tuple (<cite>min</cite>, <cite>max</cite>)
containing the smallest and highest coordinates for an axis.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>axis</strong> (<code class="docutils literal"><span class="pre">'x'</span></code> or <code class="docutils literal"><span class="pre">'y'</span></code>) &#8211; Axis for which to get the data span.</td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">Keyword Arguments:</th></tr>
<tr class="field-even field"><td>&nbsp;</td><td class="field-body"><strong>include_error_bars</strong> (<em>boolean, optional</em>) &#8211;
<code class="docutils literal"><span class="pre">True</span></code> if the returned span should be enlarged to
contain the error bars of the smallest and largest datapoints
(default: <code class="docutils literal"><span class="pre">False</span></code>)</td>
</tr>
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">the data span for the axis</td>
</tr>
<tr class="field-even field"><th class="field-name">Return type:</th><td class="field-body">a tuple (<cite>min</cite>, <cite>max</cite>)</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="kafe.dataset.Dataset.get_formatted">
<code class="descname">get_formatted</code><span class="sig-paren">(</span><em>format_string='.06e'</em>, <em>delimiter='\t'</em><span class="sig-paren">)</span><a class="headerlink" href="#kafe.dataset.Dataset.get_formatted" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the dataset in a plain-text format which is human-readable and
can later be used as an input file for the creation of a new <cite>Dataset</cite>.</p>
<p>The format is as follows:</p>
<div class="highlight-python"><div class="highlight"><pre># x data
x_1  sigma_x_1
x_2  sigma_x_2  cor_x_12
...  ...        ...       ...
x_N  sigma_x_N  cor_x_1N  ...  cor_x_NN

# y data
y_1  sigma_y_1
y_2  sigma_y_2  cor_y_12
...  ...        ...       ...
y_N  sigma_y_N  cor_y_1N  ...  cor_y_NN
</pre></div>
</div>
<p>Here, the <code class="docutils literal"><span class="pre">x_i</span></code> and <code class="docutils literal"><span class="pre">y_i</span></code> represent the measurement data, the
<code class="docutils literal"><span class="pre">sigma_?_i</span></code> are the statistical uncertainties of each data point, and
the <code class="docutils literal"><span class="pre">cor_?_ij</span></code> are the correlation coefficients between the <em>i</em>-th
and <em>j</em>-th data point.</p>
<p>If the <code class="docutils literal"><span class="pre">x</span></code> or <code class="docutils literal"><span class="pre">y</span></code> errors are not correlated, then the entire
correlation coefficient matrix can be omitted. If there are no
statistical uncertainties for an axis, the second column can also be
omitted. A blank line is required at the end of each data block!</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name" colspan="2">Keyword Arguments:</th></tr>
<tr class="field-odd field"><td>&nbsp;</td><td class="field-body"><ul class="first simple">
<li><strong>format_string</strong> (<em>string, optional</em>) &#8211;
A format string with which each entry will be rendered. Default is
<code class="docutils literal"><span class="pre">'.06e'</span></code>, which means the numbers are represented in scientific
notation with six significant digits.</li>
<li><strong>delimiter</strong> (<em>string, optional</em>) &#8211;
A delimiter used to separate columns in the output.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">a plain-text representation of the <cite>Dataset</cite></p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last">str</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="kafe.dataset.Dataset.get_size">
<code class="descname">get_size</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#kafe.dataset.Dataset.get_size" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the size of the <cite>Dataset</cite>. This is equivalent to the length of the
<cite>x</cite>-axis data.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">the number of datapoints in the <cite>Dataset</cite>.</td>
</tr>
<tr class="field-even field"><th class="field-name">Return type:</th><td class="field-body">int</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="kafe.dataset.Dataset.has_correlations">
<code class="descname">has_correlations</code><span class="sig-paren">(</span><em>axis=None</em><span class="sig-paren">)</span><a class="headerlink" href="#kafe.dataset.Dataset.has_correlations" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns <cite>True</cite> if the specified axis has correlation data, <code class="docutils literal"><span class="pre">False</span></code> if
not.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>axis</strong> (<code class="docutils literal"><span class="pre">'x'</span></code> or <code class="docutils literal"><span class="pre">'y'</span></code> or <code class="docutils literal"><span class="pre">None</span></code>, optional) &#8211; Axis for which to check for correlations. If <code class="docutils literal"><span class="pre">None</span></code>,
returns true if there are correlations for at least one axis.</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><cite>True</cite> if the specified axis has correlation data</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body">bool</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="kafe.dataset.Dataset.has_errors">
<code class="descname">has_errors</code><span class="sig-paren">(</span><em>axis=None</em><span class="sig-paren">)</span><a class="headerlink" href="#kafe.dataset.Dataset.has_errors" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns <cite>True</cite> if the specified axis has any kind of error data.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>axis</strong> (<code class="docutils literal"><span class="pre">'x'</span></code> or <code class="docutils literal"><span class="pre">'y'</span></code> or <code class="docutils literal"><span class="pre">None</span></code>, optional) &#8211; Axis for which to check for error data. If <code class="docutils literal"><span class="pre">None</span></code>,
returns true if there are errors for at least one axis.</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><cite>True</cite> if the specified axis has any kind of error data.</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body">bool</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="attribute">
<dt id="kafe.dataset.Dataset.n_datapoints">
<code class="descname">n_datapoints</code><em class="property"> = None</em><a class="headerlink" href="#kafe.dataset.Dataset.n_datapoints" title="Permalink to this definition">¶</a></dt>
<dd><p>number of data points in the <cite>Dataset</cite></p>
</dd></dl>

<dl class="method">
<dt id="kafe.dataset.Dataset.read_from_file">
<code class="descname">read_from_file</code><span class="sig-paren">(</span><em>input_file</em><span class="sig-paren">)</span><a class="headerlink" href="#kafe.dataset.Dataset.read_from_file" title="Permalink to this definition">¶</a></dt>
<dd><p>Reads the <cite>Dataset</cite> object from a file.</p>
<p>One way to construct a Dataset is to specify an input file containing
a plain-text representation of the dataset:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">my_dataset</span><span class="o">.</span><span class="n">read_from_file</span><span class="p">(</span><span class="s">&#39;/path/to/file&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>or</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">my_dataset</span><span class="o">.</span><span class="n">read_from_file</span><span class="p">(</span><span class="n">my_file_object</span><span class="p">)</span>
</pre></div>
</div>
<p>For details on the format, see
<a class="reference internal" href="#kafe.dataset.Dataset.get_formatted" title="kafe.dataset.Dataset.get_formatted"><code class="xref py py-meth docutils literal"><span class="pre">get_formatted()</span></code></a></p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>input_file</strong> (<em>str</em>) &#8211; path to the file</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><code class="docutils literal"><span class="pre">True</span></code> if the read succeeded, <code class="docutils literal"><span class="pre">False</span></code> if not.</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body">boolean</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="kafe.dataset.Dataset.remove_error_source">
<code class="descname">remove_error_source</code><span class="sig-paren">(</span><em>axis</em>, <em>err_src_id</em>, <em>recompute_cov_mat=True</em><span class="sig-paren">)</span><a class="headerlink" href="#kafe.dataset.Dataset.remove_error_source" title="Permalink to this definition">¶</a></dt>
<dd><p>Remove the error source from the <cite>Dataset</cite>.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>axis</strong> (<code class="docutils literal"><span class="pre">'x'</span></code> or <code class="docutils literal"><span class="pre">'y'</span></code>) &#8211; axis for which to add error source.</li>
<li><strong>err_src_id</strong> (<em>int</em>) &#8211; error source ID, as returned by
<a class="reference internal" href="#kafe.dataset.Dataset.add_error_source" title="kafe.dataset.Dataset.add_error_source"><code class="xref py py-meth docutils literal"><span class="pre">add_error_source()</span></code></a>.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">Keyword Arguments:</th></tr>
<tr class="field-even field"><td>&nbsp;</td><td class="field-body"><p class="first last"><strong>recompute_cov_mat</strong> (boolean, optional, default <code class="docutils literal"><span class="pre">True</span></code>) &#8211;
recalculate the total covariance matrix after removing the error
source</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="kafe.dataset.Dataset.set_axis_data">
<code class="descname">set_axis_data</code><span class="sig-paren">(</span><em>axis</em>, <em>data</em><span class="sig-paren">)</span><a class="headerlink" href="#kafe.dataset.Dataset.set_axis_data" title="Permalink to this definition">¶</a></dt>
<dd><p>Set the measurement data for a single axis.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>axis</strong> (<code class="docutils literal"><span class="pre">'x'</span></code> or <code class="docutils literal"><span class="pre">'y'</span></code>) &#8211; Axis for which to set the measurement data.</li>
<li><strong>data</strong> (<em>iterable</em>) &#8211; Measurement data for axis.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="kafe.dataset.Dataset.set_cov_mat">
<code class="descname">set_cov_mat</code><span class="sig-paren">(</span><em>axis</em>, <em>mat</em><span class="sig-paren">)</span><a class="headerlink" href="#kafe.dataset.Dataset.set_cov_mat" title="Permalink to this definition">¶</a></dt>
<dd><p>Forcibly set the error matrix for an axis, ignoring <a class="reference internal" href="#kafe.dataset.ErrorSource" title="kafe.dataset.ErrorSource"><code class="xref py py-class docutils literal"><span class="pre">ErrorSource</span></code></a>
objects. This is useful for adjusting the covariance matrix during the
fit process.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>axis</strong> (<code class="docutils literal"><span class="pre">'x'</span></code> or <code class="docutils literal"><span class="pre">'y'</span></code>) &#8211; Axis for which to load the error matrix.</li>
<li><strong>mat</strong> (<cite>numpy.matrix</cite> or <code class="docutils literal"><span class="pre">None</span></code>) &#8211; Error matrix for the axis. Passing <code class="docutils literal"><span class="pre">None</span></code> unsets the error
matrix.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="kafe.dataset.Dataset.set_data">
<code class="descname">set_data</code><span class="sig-paren">(</span><em>data</em><span class="sig-paren">)</span><a class="headerlink" href="#kafe.dataset.Dataset.set_data" title="Permalink to this definition">¶</a></dt>
<dd><p>Set the measurement data for both axes.</p>
<p>Each element of <strong>data</strong> must be iterable and be of the same length.
The first element of the <strong>data</strong> tuple/list is assumed to be the <cite>x</cite>
data, and the second to be the <cite>y</cite> data:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">my_dataset</span><span class="o">.</span><span class="n">set_data</span><span class="p">(([</span><span class="mf">0.</span><span class="p">,</span> <span class="mf">1.</span><span class="p">,</span> <span class="mf">2.</span><span class="p">],</span> <span class="p">[</span><span class="mf">1.23</span><span class="p">,</span> <span class="mf">3.45</span><span class="p">,</span> <span class="mf">5.62</span><span class="p">]))</span>
</pre></div>
</div>
<p>Alternatively, <em>x</em>-<em>y</em> value pairs can also be passed as <strong>data</strong>. The
following is equivalent to the above:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">my_dataset</span><span class="o">.</span><span class="n">set_data</span><span class="p">(([</span><span class="mf">0.0</span><span class="p">,</span> <span class="mf">1.23</span><span class="p">],</span> <span class="p">[</span><span class="mf">1.0</span><span class="p">,</span> <span class="mf">3.45</span><span class="p">],</span> <span class="p">[</span><span class="mf">2.0</span><span class="p">,</span> <span class="mf">5.62</span><span class="p">]))</span>
</pre></div>
</div>
<p>In case the <cite>Dataset</cite> contains two data points, the ordering is
ambiguous. In this case, the first ordering (<cite>x</cite> data first, then <cite>y</cite>
data) is assumed.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>data</strong> (<em>iterable</em>) &#8211; the measurement data. Either of the form (xdata, ydata) or
[(x1, y1), (x2, y2),... (xn, yn)]</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="kafe.dataset.Dataset.write_formatted">
<code class="descname">write_formatted</code><span class="sig-paren">(</span><em>file_path</em>, <em>format_string='.06e'</em>, <em>delimiter='\t'</em><span class="sig-paren">)</span><a class="headerlink" href="#kafe.dataset.Dataset.write_formatted" title="Permalink to this definition">¶</a></dt>
<dd><p>Writes the dataset to a plain-text file. For details on the format, see
<a class="reference internal" href="#kafe.dataset.Dataset.read_from_file" title="kafe.dataset.Dataset.read_from_file"><code class="xref py py-meth docutils literal"><span class="pre">read_from_file()</span></code></a>.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>file_path</strong> (<em>string</em>) &#8211; Path of the file object to write. <strong>WARNING</strong>: <em>overwrites existing
files</em>!</p>
</td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">Keyword Arguments:</th></tr>
<tr class="field-even field"><td>&nbsp;</td><td class="field-body"><ul class="first last simple">
<li><strong>format_string</strong> (<em>string, optional</em>) &#8211;
A format string with which each entry will be rendered. Default is
<code class="docutils literal"><span class="pre">'.06e'</span></code>, which means the numbers are represented in scientific
notation with six significant digits.</li>
<li><strong>delimiter</strong> (<em>string, optional</em>) &#8211;
A delimiter used to separate columns in the output.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="kafe.dataset.ErrorSource">
<em class="property">class </em><code class="descclassname">kafe.dataset.</code><code class="descname">ErrorSource</code><a class="headerlink" href="#kafe.dataset.ErrorSource" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal"><span class="pre">object</span></code></p>
<p>This object stores the error information for a <code class="xref py py-obj docutils literal"><span class="pre">Dataset</span></code> as a
<em>covariance matrix</em> <img class="math" src="_images/math/2bcc65482aa8e15cd4c9e9f2542451fb4e971a91.png" alt="C"/> (sometimes also referred to as the <em>error
matrix</em>). This has several advantages: it allows calculating the function
to minimize (e.g. the chi-square) for a fit as a matrix product, and it
allows specifying multiple error sources for a <cite>Dataset</cite> by simply adding
up the corresponding matrices.</p>
<p>The object contains methods to generate a covariance matrix for some
simple cases, such as when all points have the same relative or absolute
errors and the errors are either not correlated or fully correlated. For
more complicated error models, a covariance matrix can be specified
directly.</p>
<dl class="method">
<dt id="kafe.dataset.ErrorSource.get_matrix">
<code class="descname">get_matrix</code><span class="sig-paren">(</span><em>size=None</em><span class="sig-paren">)</span><a class="headerlink" href="#kafe.dataset.ErrorSource.get_matrix" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns/Generates the covariance matrix for this ErrorSource.</p>
<p>If the user specified the matrix using
<a class="reference internal" href="#kafe.dataset.ErrorSource.make_from_matrix" title="kafe.dataset.ErrorSource.make_from_matrix"><code class="xref py py-meth docutils literal"><span class="pre">make_from_matrix()</span></code></a>,
returns that matrix. If a simple error model is specified, a matrix is
constructed as follows:</p>
<p>For <em>uncorrelated</em> errors, the covariance matrix is always diagonal.</p>
<p>If a single float <img class="math" src="_images/math/2298cf1485084afe72757a9c8483af49a138d81f.png" alt="\sigma"/> is given as the error, the diagonal
entries will be equal to <img class="math" src="_images/math/93c29bfedc993de115781b4fbb7e3a8b9e8d6b51.png" alt="\sigma^2"/>. In this case, the matrix
size needs to be specified via the <code class="docutils literal"><span class="pre">size</span></code> parameter.</p>
<p>If a list of floats <img class="math" src="_images/math/b79c9c4567863b03143dff446f6b06d86ec45d31.png" alt="\sigma_i"/> is given as the error, the
<em>i</em>-th entry will be equal to <img class="math" src="_images/math/846669ac9d8e375ee51d143e106eaf6c94cc73c8.png" alt="{\sigma_i}^2"/>. In this case,
the size of the matrix is inferred from the size of the list.</p>
<p>For <em>fully correlated</em> errors, the covariance matrix is the outer
product of the error array <img class="math" src="_images/math/b79c9c4567863b03143dff446f6b06d86ec45d31.png" alt="\sigma_i"/> with itself, i.e. the
<img class="math" src="_images/math/0de78069ab15c688f6d8c6f59d5c5805bc969595.png" alt="(i,j)"/>-th matrix entry will be equal to
<img class="math" src="_images/math/405e7717fc48880b6c27748f32f6dcd9f3b4f3f7.png" alt="\sigma_i\sigma_j"/>.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name" colspan="2">Keyword Arguments:</th></tr>
<tr class="field-odd field"><td>&nbsp;</td><td class="field-body"><strong>size</strong> (<em>int (sometimes required)</em>) &#8211;
Size of the matrix to return. Only relevant if the error value
is a single float, since in that case there is no way to deduce
the matrix size.</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="kafe.dataset.ErrorSource.make_from_matrix">
<code class="descname">make_from_matrix</code><span class="sig-paren">(</span><em>cov_mat</em>, <em>check_singular=False</em><span class="sig-paren">)</span><a class="headerlink" href="#kafe.dataset.ErrorSource.make_from_matrix" title="Permalink to this definition">¶</a></dt>
<dd><p>Sets the covariance matrix manually.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>cov_mat</strong> (<em>numpy.matrix</em>) &#8211; A <em>square</em>, <em>symmetric</em> (and usually <em>regular</em>) matrix.</td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">Keyword Arguments:</th></tr>
<tr class="field-even field"><td>&nbsp;</td><td class="field-body"><strong>check_singular</strong> (<em>boolean, optional</em>) &#8211;
Whether to force singularity check. Defaults to <code class="docutils literal"><span class="pre">False</span></code>.</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="kafe.dataset.ErrorSource.make_from_val">
<code class="descname">make_from_val</code><span class="sig-paren">(</span><em>err_val</em>, <em>fully_correlated=False</em><span class="sig-paren">)</span><a class="headerlink" href="#kafe.dataset.ErrorSource.make_from_val" title="Permalink to this definition">¶</a></dt>
<dd><p>Sets information required to construct the covariance matrix.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>err_val</strong> (<em>float or sequence of floats</em>) &#8211; If all data points have the same uncertainty</td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">Keyword Arguments:</th></tr>
<tr class="field-even field"><td>&nbsp;</td><td class="field-body"><strong>fully_correlated</strong> (<em>boolean, optional</em>) &#8211;
Whether the errors are fully correlated. Defaults to <code class="docutils literal"><span class="pre">False</span></code>.</td>
</tr>
</tbody>
</table>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="module-kafe.fit">
<span id="fit-fit-of-model-functions-to-a-dataset-kafe-fit"></span><h3><code class="docutils literal"><span class="pre">Fit</span></code>: Fit of model functions to a <code class="docutils literal"><span class="pre">Dataset</span></code> (<a class="reference internal" href="#module-kafe.fit" title="kafe.fit"><code class="xref py py-mod docutils literal"><span class="pre">kafe.fit</span></code></a>)<a class="headerlink" href="#module-kafe.fit" title="Permalink to this headline">¶</a></h3>
<span class="target" id="module-fit"></span><dl class="function">
<dt id="kafe.fit.CL2Chi2">
<code class="descclassname">kafe.fit.</code><code class="descname">CL2Chi2</code><span class="sig-paren">(</span><em>CL</em><span class="sig-paren">)</span><a class="headerlink" href="#kafe.fit.CL2Chi2" title="Permalink to this definition">¶</a></dt>
<dd><p>Helper function to calculate DeltaChi2 from confidence level CL</p>
</dd></dl>

<dl class="function">
<dt id="kafe.fit.Chi22CL">
<code class="descclassname">kafe.fit.</code><code class="descname">Chi22CL</code><span class="sig-paren">(</span><em>dc2</em><span class="sig-paren">)</span><a class="headerlink" href="#kafe.fit.Chi22CL" title="Permalink to this definition">¶</a></dt>
<dd><p>Helper function to calculate confidence level CL from DeltaChi2</p>
</dd></dl>

<dl class="class">
<dt id="kafe.fit.Fit">
<em class="property">class </em><code class="descclassname">kafe.fit.</code><code class="descname">Fit</code><span class="sig-paren">(</span><em>dataset</em>, <em>fit_function</em>, <em>external_fcn=&lt;function chi2&gt;</em>, <em>fit_name=None</em>, <em>fit_label=None</em>, <em>minimizer_to_use='iminuit'</em><span class="sig-paren">)</span><a class="headerlink" href="#kafe.fit.Fit" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal"><span class="pre">object</span></code></p>
<p>Object representing a fit. This object references the fitted <cite>Dataset</cite>,
the fit function and the resulting fit parameters.</p>
<p>Necessary arguments are a <cite>Dataset</cite> object and a fit function (which should
be fitted to the <cite>Dataset</cite>). Optionally, an external function <cite>FCN</cite> (the
minimum of which should be located to find the best fit) can be specified.
If not given, the <cite>FCN</cite> function defaults to <img class="math" src="_images/math/8bd0685e3bf9101859d24cf0e851651f182364c9.png" alt="\chi^2"/>.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>dataset</strong> (<cite>Dataset</cite>) &#8211; A <cite>Dataset</cite> object containing all information about the data</li>
<li><strong>fit_function</strong> (<em>function</em>) &#8211; <p>A user-defined Python function to fit to the data. This
function&#8217;s first argument must be the independent variable <cite>x</cite>. All
other arguments <em>must</em> be named and have default values given. These
defaults are used as a starting point for the actual minimization. For
example, a simple linear function would be defined like:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="k">def</span> <span class="nf">linear_2par</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">slope</span><span class="o">=</span><span class="mf">1.</span><span class="p">,</span> <span class="n">y_intercept</span><span class="o">=</span><span class="mf">0.</span><span class="p">):</span>
<span class="gp">... </span>    <span class="k">return</span> <span class="n">slope</span> <span class="o">*</span> <span class="n">x</span> <span class="o">+</span> <span class="n">y_intercept</span>
</pre></div>
</div>
<p>Be aware that choosing sensible initial values for the parameters is
often crucial for a succesful fit, particularly for functions of many
parameters.</p>
</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">Keyword Arguments:</th></tr>
<tr class="field-even field"><td>&nbsp;</td><td class="field-body"><ul class="first last">
<li><p class="first"><strong>external_fcn</strong> (<em>function, optional</em>) &#8211;
An external <cite>FCN</cite> (function to minimize). This function must have the
following call signature:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">FCN</span><span class="p">(</span><span class="n">xdata</span><span class="p">,</span> <span class="n">ydata</span><span class="p">,</span> <span class="n">cov_mat</span><span class="p">,</span> <span class="n">fit_function</span><span class="p">,</span> <span class="n">parameter_values</span><span class="p">)</span>
</pre></div>
</div>
<p>It should return a float. If not specified, the default <img class="math" src="_images/math/8bd0685e3bf9101859d24cf0e851651f182364c9.png" alt="\chi^2"/>
<cite>FCN</cite> is used. This should be sufficient for most fits.</p>
</li>
<li><p class="first"><strong>fit_name</strong> (<em>string, optional</em>) &#8211;
An ASCII name for this fit. This is used as a label for the the
matplotlib figure window and for naming the fit output file. If
omitted, the fit will take over the name of the parent dataset.</p>
</li>
<li><p class="first"><strong>fit_label</strong> (<img class="math" src="_images/math/a7232b593ed37730342f85e75263e83d0dd59863.png" alt="LaTeX"/>-formatted string, optional) &#8211;
A name/label/short description of the fit function. This appears in the
legend describing the fitter curve. If omitted, this defaults to the
fit function&#8217;s <img class="math" src="_images/math/a7232b593ed37730342f85e75263e83d0dd59863.png" alt="LaTeX"/> expression.</p>
</li>
<li><p class="first"><strong>minimizer_to_use</strong> (<em>&#8216;ROOT&#8217; or &#8216;minuit&#8217;, optional</em>) &#8211;
Which minimizer to use. This defaults to whatever is set in the config
file, but can be specifically overridden for some fits using this
keyword argument</p>
</li>
</ul>
</td>
</tr>
</tbody>
</table>
<dl class="method">
<dt id="kafe.fit.Fit.call_external_fcn">
<code class="descname">call_external_fcn</code><span class="sig-paren">(</span><em>*parameter_values</em><span class="sig-paren">)</span><a class="headerlink" href="#kafe.fit.Fit.call_external_fcn" title="Permalink to this definition">¶</a></dt>
<dd><p>Wrapper for the external <cite>FCN</cite>. Since the actual fit process depends on
finding the right parameter values and keeping everything else constant
we can use the <cite>Dataset</cite> object to pass known, fixed information to the
external <cite>FCN</cite>, varying only the parameter values.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>parameter_values</strong> (<em>sequence of values</em>) &#8211; the parameter values at which <cite>FCN</cite> is to be evaluated</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="kafe.fit.Fit.call_minimizer">
<code class="descname">call_minimizer</code><span class="sig-paren">(</span><em>final_fit=True</em>, <em>verbose=False</em>, <em>quiet=False</em><span class="sig-paren">)</span><a class="headerlink" href="#kafe.fit.Fit.call_minimizer" title="Permalink to this definition">¶</a></dt>
<dd><p>Instructs the minimizer to do a minimization.</p>
</dd></dl>

<dl class="method">
<dt id="kafe.fit.Fit.constrain_parameters">
<code class="descname">constrain_parameters</code><span class="sig-paren">(</span><em>parameters</em>, <em>parvals</em>, <em>parerrs</em>, <em>cor_mat=None</em><span class="sig-paren">)</span><a class="headerlink" href="#kafe.fit.Fit.constrain_parameters" title="Permalink to this definition">¶</a></dt>
<dd><p>Constrain the parameter with the given name to <img class="math" src="_images/math/22969ccbf4a4187d2e589315c963ec661be8d93e.png" alt="c\pm\sigma"/>.
This is achieved by adding an appropriate <cite>penalty term</cite> to the
<img class="math" src="_images/math/8bd0685e3bf9101859d24cf0e851651f182364c9.png" alt="\chi^2"/> function, see function <a class="reference internal" href="#kafe.fit.chi2" title="kafe.fit.chi2"><code class="xref py py-func docutils literal"><span class="pre">chi2()</span></code></a>.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>parameters</strong> (<em>list of int</em>) &#8211; list of paramter id&#8217;s or names to constrain</li>
<li><strong>parvals</strong> (<em>list of float</em>) &#8211; list of parameter values</li>
<li><strong>parerrs</strong> (<em>list of float</em>) &#8211; list of errors on parameters</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">Keyword Arguments:</th></tr>
<tr class="field-even field"><td>&nbsp;</td><td class="field-body"><p class="first last"><strong>**cor_mat**</strong> (<cite>numpy.matrix</cite> optional) &#8211;
correlation matrix of the parameters</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="attribute">
<dt id="kafe.fit.Fit.contours">
<code class="descname">contours</code><em class="property"> = None</em><a class="headerlink" href="#kafe.fit.Fit.contours" title="Permalink to this definition">¶</a></dt>
<dd><p>Parameter Contours [id1, id2, dchi2, [xc], [yc]]</p>
</dd></dl>

<dl class="attribute">
<dt id="kafe.fit.Fit.current_cov_mat">
<code class="descname">current_cov_mat</code><em class="property"> = None</em><a class="headerlink" href="#kafe.fit.Fit.current_cov_mat" title="Permalink to this definition">¶</a></dt>
<dd><p>the current covariance matrix used for the <cite>Fit</cite></p>
</dd></dl>

<dl class="attribute">
<dt id="kafe.fit.Fit.dataset">
<code class="descname">dataset</code><em class="property"> = None</em><a class="headerlink" href="#kafe.fit.Fit.dataset" title="Permalink to this definition">¶</a></dt>
<dd><p>this Fit instance&#8217;s child <cite>Dataset</cite></p>
</dd></dl>

<dl class="method">
<dt id="kafe.fit.Fit.do_fit">
<code class="descname">do_fit</code><span class="sig-paren">(</span><em>quiet=False</em>, <em>verbose=False</em><span class="sig-paren">)</span><a class="headerlink" href="#kafe.fit.Fit.do_fit" title="Permalink to this definition">¶</a></dt>
<dd><p>Runs the fit algorithm for this <cite>Fit</cite> object.</p>
<p>First, the <code class="xref py py-obj docutils literal"><span class="pre">Dataset</span></code> is fitted considering only uncertainties
in the
<cite>y</cite> direction. If the <cite>Dataset</cite> has no uncertainties in the <cite>y</cite>
direction, they are assumed to be equal to 1.0 for this preliminary
fit, as there is no better information available.</p>
<p>Next, the fit errors in the <cite>x</cite> direction (if they exist) are taken
into account by projecting the covariance matrix for the <cite>x</cite> errors
onto the <cite>y</cite> covariance matrix. This is done by taking the first
derivative of the fit function in each point and &#8220;projecting&#8221; the <cite>x</cite>
error onto the resulting tangent to the curve.</p>
<p>This last step is repeated until the change in the error matrix caused
by the projection becomes negligible.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name" colspan="2">Keyword Arguments:</th></tr>
<tr class="field-odd field"><td>&nbsp;</td><td class="field-body"><ul class="first last simple">
<li><strong>quiet</strong> (<em>boolean, optional</em>) &#8211;
Set to <code class="docutils literal"><span class="pre">True</span></code> if no output should be printed.</li>
<li><strong>verbose</strong> (<em>boolean, optional</em>) &#8211;
Set to <code class="docutils literal"><span class="pre">True</span></code> if more output should be printed.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="attribute">
<dt id="kafe.fit.Fit.external_fcn">
<code class="descname">external_fcn</code><em class="property"> = None</em><a class="headerlink" href="#kafe.fit.Fit.external_fcn" title="Permalink to this definition">¶</a></dt>
<dd><p>the (external) function to be minimized for this <cite>Fit</cite></p>
</dd></dl>

<dl class="attribute">
<dt id="kafe.fit.Fit.final_fcn">
<code class="descname">final_fcn</code><em class="property"> = None</em><a class="headerlink" href="#kafe.fit.Fit.final_fcn" title="Permalink to this definition">¶</a></dt>
<dd><p>Final minimum of fcn (chi2)</p>
</dd></dl>

<dl class="attribute">
<dt id="kafe.fit.Fit.final_parameter_errors">
<code class="descname">final_parameter_errors</code><em class="property"> = None</em><a class="headerlink" href="#kafe.fit.Fit.final_parameter_errors" title="Permalink to this definition">¶</a></dt>
<dd><p>Final parameter errors</p>
</dd></dl>

<dl class="attribute">
<dt id="kafe.fit.Fit.final_parameter_values">
<code class="descname">final_parameter_values</code><em class="property"> = None</em><a class="headerlink" href="#kafe.fit.Fit.final_parameter_values" title="Permalink to this definition">¶</a></dt>
<dd><p>Final parameter values</p>
</dd></dl>

<dl class="attribute">
<dt id="kafe.fit.Fit.fit_function">
<code class="descname">fit_function</code><em class="property"> = None</em><a class="headerlink" href="#kafe.fit.Fit.fit_function" title="Permalink to this definition">¶</a></dt>
<dd><p>the fit function used for this <cite>Fit</cite></p>
</dd></dl>

<dl class="method">
<dt id="kafe.fit.Fit.fix_parameters">
<code class="descname">fix_parameters</code><span class="sig-paren">(</span><em>*parameters_to_fix</em><span class="sig-paren">)</span><a class="headerlink" href="#kafe.fit.Fit.fix_parameters" title="Permalink to this definition">¶</a></dt>
<dd><p>Fix the given parameters so that the minimizer works without them
when <a class="reference internal" href="#kafe.fit.Fit.do_fit" title="kafe.fit.Fit.do_fit"><code class="xref py py-meth docutils literal"><span class="pre">do_fit()</span></code></a> is called next. Parameters can be
given by their names or by their IDs.</p>
</dd></dl>

<dl class="method">
<dt id="kafe.fit.Fit.get_current_fit_function">
<code class="descname">get_current_fit_function</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#kafe.fit.Fit.get_current_fit_function" title="Permalink to this definition">¶</a></dt>
<dd><p>This method returns a function object corresponding to the fit function
for the current parameter values. The returned function is a function
of a single variable.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">A function of a single variable corresponding to the fit function
at the current parameter values.</td>
</tr>
<tr class="field-even field"><th class="field-name">Return type:</th><td class="field-body">function handle</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="kafe.fit.Fit.get_error_matrix">
<code class="descname">get_error_matrix</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#kafe.fit.Fit.get_error_matrix" title="Permalink to this definition">¶</a></dt>
<dd><p>This method returns the covariance matrix of the fit parameters which
is obtained by querying the minimizer object for this <cite>Fit</cite></p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">The covariance matrix of the parameters.</td>
</tr>
<tr class="field-even field"><th class="field-name">Return type:</th><td class="field-body"><em>numpy.matrix</em></td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="kafe.fit.Fit.get_function_error">
<code class="descname">get_function_error</code><span class="sig-paren">(</span><em>x</em><span class="sig-paren">)</span><a class="headerlink" href="#kafe.fit.Fit.get_function_error" title="Permalink to this definition">¶</a></dt>
<dd><p>This method uses the parameter error matrix of the fit to calculate
a symmetric (parabolic) error on the function value itself. Note that
this method takes the entire parameter error matrix into account, so
that it also accounts for correlations.</p>
<p>The method is useful if, e.g., you want to draw a confidence band
around the function in your plot routine.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>x</strong> (<cite>float</cite> or sequence of <cite>float</cite>) &#8211; the values at which the function error is to be estimated</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">the estimated error at the given point(s)</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body">float or sequence of float</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="kafe.fit.Fit.get_parameter_errors">
<code class="descname">get_parameter_errors</code><span class="sig-paren">(</span><em>rounding=False</em><span class="sig-paren">)</span><a class="headerlink" href="#kafe.fit.Fit.get_parameter_errors" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the current parameter uncertainties from the minimizer.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name" colspan="2">Keyword Arguments:</th></tr>
<tr class="field-odd field"><td>&nbsp;</td><td class="field-body"><strong>rounding</strong> (<em>boolean, optional</em>) &#8211;
Whether or not to round the returned values to significance.</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">A tuple of the parameter uncertainties</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body">tuple</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="kafe.fit.Fit.get_parameter_values">
<code class="descname">get_parameter_values</code><span class="sig-paren">(</span><em>rounding=False</em><span class="sig-paren">)</span><a class="headerlink" href="#kafe.fit.Fit.get_parameter_values" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the current parameter values from the minimizer.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name" colspan="2">Keyword Arguments:</th></tr>
<tr class="field-odd field"><td>&nbsp;</td><td class="field-body"><strong>rounding</strong> (<em>boolean, optional</em>) &#8211;
Whether or not to round the returned values to significance.</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">A tuple of the parameter values</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body">tuple</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="kafe.fit.Fit.get_results">
<code class="descname">get_results</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#kafe.fit.Fit.get_results" title="Permalink to this definition">¶</a></dt>
<dd><p>Return results from Fit</p>
</dd></dl>

<dl class="attribute">
<dt id="kafe.fit.Fit.latex_parameter_names">
<code class="descname">latex_parameter_names</code><em class="property"> = None</em><a class="headerlink" href="#kafe.fit.Fit.latex_parameter_names" title="Permalink to this definition">¶</a></dt>
<dd><p><img class="math" src="_images/math/a7232b593ed37730342f85e75263e83d0dd59863.png" alt="LaTeX"/> parameter names</p>
</dd></dl>

<dl class="attribute">
<dt id="kafe.fit.Fit.minos_errors">
<code class="descname">minos_errors</code><em class="property"> = None</em><a class="headerlink" href="#kafe.fit.Fit.minos_errors" title="Permalink to this definition">¶</a></dt>
<dd><p>MINOS Errors [err, err+, err-, gcor]</p>
</dd></dl>

<dl class="attribute">
<dt id="kafe.fit.Fit.number_of_parameters">
<code class="descname">number_of_parameters</code><em class="property"> = None</em><a class="headerlink" href="#kafe.fit.Fit.number_of_parameters" title="Permalink to this definition">¶</a></dt>
<dd><p>the total number of parameters</p>
</dd></dl>

<dl class="attribute">
<dt id="kafe.fit.Fit.par_cov_mat">
<code class="descname">par_cov_mat</code><em class="property"> = None</em><a class="headerlink" href="#kafe.fit.Fit.par_cov_mat" title="Permalink to this definition">¶</a></dt>
<dd><p>Parameter covariance matrix (<cite>numpy.matrix</cite>)</p>
</dd></dl>

<dl class="attribute">
<dt id="kafe.fit.Fit.parabolic_errors">
<code class="descname">parabolic_errors</code><em class="property"> = None</em><a class="headerlink" href="#kafe.fit.Fit.parabolic_errors" title="Permalink to this definition">¶</a></dt>
<dd><p><code class="docutils literal"><span class="pre">True</span></code> if <img class="math" src="_images/math/8bd0685e3bf9101859d24cf0e851651f182364c9.png" alt="\chi^2"/> is approx. parabolic (boolean)</p>
</dd></dl>

<dl class="method">
<dt id="kafe.fit.Fit.parameter_is_fixed">
<code class="descname">parameter_is_fixed</code><span class="sig-paren">(</span><em>parameter</em><span class="sig-paren">)</span><a class="headerlink" href="#kafe.fit.Fit.parameter_is_fixed" title="Permalink to this definition">¶</a></dt>
<dd><p>Check whether a parameter is fixed. Accepts a parameter&#8217;s name or ID
and returns a boolean value.</p>
</dd></dl>

<dl class="attribute">
<dt id="kafe.fit.Fit.parameter_names">
<code class="descname">parameter_names</code><em class="property"> = None</em><a class="headerlink" href="#kafe.fit.Fit.parameter_names" title="Permalink to this definition">¶</a></dt>
<dd><p>the names of the parameters</p>
</dd></dl>

<dl class="method">
<dt id="kafe.fit.Fit.plot_contour">
<code class="descname">plot_contour</code><span class="sig-paren">(</span><em>parameter1</em>, <em>parameter2</em>, <em>dchi2=2.3</em>, <em>n_points=100</em>, <em>color='gray'</em>, <em>alpha=0.1</em>, <em>show=False</em>, <em>axes=None</em><span class="sig-paren">)</span><a class="headerlink" href="#kafe.fit.Fit.plot_contour" title="Permalink to this definition">¶</a></dt>
<dd><p>Plots one or more two-dimensional contours for this fit into
a separate figure and returns the figure object.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>parameter1</strong> (<em>int or string</em>) &#8211; ID or name of the parameter to appear on the <cite>x</cite>-axis.</li>
<li><strong>parameter2</strong> (<em>int or string</em>) &#8211; ID or name of the parameter to appear on the <cite>y</cite>-axis.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">Keyword Arguments:</th></tr>
<tr class="field-even field"><td>&nbsp;</td><td class="field-body"><ul class="first simple">
<li><strong>dchi2</strong> (<em>float or list of floats (otpional)</em>) &#8211;
delta-chi^2 value(s) used to evaluate contour(s)
1. = 1 sigma
2.3 = 68.0% (default)
4.  = 2 sigma
5.99 = 95.0%</li>
<li><strong>n_points</strong> (<em>int, optional</em>) &#8211;
Number of plot points to use for the contour. Higher
values yield smoother contours but take longer to
render. Default is 100.</li>
<li><strong>color</strong> (<em>string, optional</em>) &#8211;
A <code class="docutils literal"><span class="pre">matplotlib</span></code> color identifier specifying the fill color
of the contour. Default is &#8216;gray&#8217;.</li>
<li><strong>alpha</strong> (<em>float, optional</em>) &#8211;
Transparency of the contour fill color ranging from 0. (fully
transparent) to 1. (fully opaque). Default is 0.25</li>
<li><strong>show</strong> (<em>boolean, optional</em>) &#8211;
Specify whether to show the figure before returning it. Defaults
to <code class="docutils literal"><span class="pre">False</span></code>.</li>
<li><strong>axes</strong> (<cite>maplotlib.pyplot.axes</cite>) &#8211;
Sub-plot axes to add plot to</li>
</ul>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">A figure object containing the contour plot.</p>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last"><code class="docutils literal"><span class="pre">matplotlib</span></code> figure object if no axes given</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="kafe.fit.Fit.plot_correlations">
<code class="descname">plot_correlations</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#kafe.fit.Fit.plot_correlations" title="Permalink to this definition">¶</a></dt>
<dd><p>Plots two-dimensional contours for all pairs of parameters
and profile for all parameters, arranges as a matrix.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">A figure object containing the matrix of plots.</td>
</tr>
<tr class="field-even field"><th class="field-name">Return type:</th><td class="field-body"><code class="docutils literal"><span class="pre">matplotlib</span></code> figure object</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="kafe.fit.Fit.plot_profile">
<code class="descname">plot_profile</code><span class="sig-paren">(</span><em>parid</em>, <em>n_points=21</em>, <em>color='blue'</em>, <em>alpha=0.5</em>, <em>show=False</em>, <em>axes=None</em><span class="sig-paren">)</span><a class="headerlink" href="#kafe.fit.Fit.plot_profile" title="Permalink to this definition">¶</a></dt>
<dd><p>Plots a profile <img class="math" src="_images/math/bf117cbfee1f9c60cbf24374a8917c92a740e692.png" alt="\\chi^2"/> for this fit into
a separate figure and returns the figure object.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>parid</strong> (<em>int or string</em>) &#8211; ID or name of parameter</p>
</td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">Keyword Arguments:</th></tr>
<tr class="field-even field"><td>&nbsp;</td><td class="field-body"><ul class="first simple">
<li><strong>n_points</strong> (<em>int, optional</em>) &#8211;
Number of plot points to use for the profile curve.</li>
<li><strong>color</strong> (<em>string, optional</em>) &#8211;
A <code class="docutils literal"><span class="pre">matplotlib</span></code> color identifier specifying the line
color. Default is &#8216;blue&#8217;.</li>
<li><strong>alpha</strong> (<em>float, optional</em>) &#8211;
Transparency of the contour fill color ranging from 0. (fully
transparent) to 1. (fully opaque). Default is 0.25</li>
<li><strong>show</strong> (<em>boolean, optional</em>) &#8211;
Specify whether to show the figure before returning it. Defaults
to <code class="docutils literal"><span class="pre">False</span></code>.</li>
<li><strong>axes</strong> (<em>sub-plot axes to put plot</em>)</li>
</ul>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">A figure object containing the profile plot.</p>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last"><code class="docutils literal"><span class="pre">matplotlib</span></code> figure object if axes is None</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="kafe.fit.Fit.print_fit_details">
<code class="descname">print_fit_details</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#kafe.fit.Fit.print_fit_details" title="Permalink to this definition">¶</a></dt>
<dd><p>prints some fit goodness details</p>
</dd></dl>

<dl class="method">
<dt id="kafe.fit.Fit.print_fit_results">
<code class="descname">print_fit_results</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#kafe.fit.Fit.print_fit_results" title="Permalink to this definition">¶</a></dt>
<dd><p>prints fit results</p>
</dd></dl>

<dl class="method">
<dt id="kafe.fit.Fit.print_raw_results">
<code class="descname">print_raw_results</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#kafe.fit.Fit.print_raw_results" title="Permalink to this definition">¶</a></dt>
<dd><p>unformatted print-out of all fit results in</p>
</dd></dl>

<dl class="method">
<dt id="kafe.fit.Fit.print_rounded_fit_parameters">
<code class="descname">print_rounded_fit_parameters</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#kafe.fit.Fit.print_rounded_fit_parameters" title="Permalink to this definition">¶</a></dt>
<dd><p>prints the fit parameters</p>
</dd></dl>

<dl class="attribute">
<dt id="kafe.fit.Fit.profiles">
<code class="descname">profiles</code><em class="property"> = None</em><a class="headerlink" href="#kafe.fit.Fit.profiles" title="Permalink to this definition">¶</a></dt>
<dd><p>Parameter Profiles [id1, [xp], [dchi1(xp)]]</p>
</dd></dl>

<dl class="method">
<dt id="kafe.fit.Fit.project_x_covariance_matrix">
<code class="descname">project_x_covariance_matrix</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#kafe.fit.Fit.project_x_covariance_matrix" title="Permalink to this definition">¶</a></dt>
<dd><p>Project elements of the <cite>x</cite> covariance matrix onto the total
matrix.</p>
<p>This is done element-wise, according to the formula:</p>
<div class="math">
<p><img src="_images/math/e5a8879219285899d81b307fd9b471c00c3a407f.png" alt="C_{\text{tot}, ij} = C_{y, ij} + C_{x, ij}
\frac{\partial f}{\partial x_i}  \frac{\partial f}{\partial x_j}"/></p>
</div></dd></dl>

<dl class="method">
<dt id="kafe.fit.Fit.release_parameters">
<code class="descname">release_parameters</code><span class="sig-paren">(</span><em>*parameters_to_release</em><span class="sig-paren">)</span><a class="headerlink" href="#kafe.fit.Fit.release_parameters" title="Permalink to this definition">¶</a></dt>
<dd><p>Release the given parameters so that the minimizer begins to work with
them when <code class="xref py py-func docutils literal"><span class="pre">do_fit()</span></code> is called next. Parameters can be given by
their
names or by their IDs. If no arguments are provied, then release all
parameters.</p>
</dd></dl>

<dl class="method">
<dt id="kafe.fit.Fit.set_parameters">
<code class="descname">set_parameters</code><span class="sig-paren">(</span><em>*args</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#kafe.fit.Fit.set_parameters" title="Permalink to this definition">¶</a></dt>
<dd><p>Sets the parameter values (and optionally errors) for this fit.
This is usually called just before the fit is done, to establish
the initial parameters. If a parameter error is omitted, it is
set to 1/10th of the parameter values themselves. If the default
value of the parameter is 0, it is set, by exception, to 0.1.</p>
<p>This method accepts up to two positional arguments and several
keyword arguments.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>args[0]</strong> (<em>tuple/list of floats, optional</em>) &#8211; The first positional argument is expected to be
a tuple/list containing the parameter values.</li>
<li><strong>args[1]</strong> (<em>tuple/list of floats, optional</em>) &#8211; The second positional argument is expected to be a
tuple/list of parameter errors, which can also be set as an
approximate estimate of the problem&#8217;s uncertainty.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">Keyword Arguments:</th></tr>
<tr class="field-even field"><td>&nbsp;</td><td class="field-body"><ul class="first last simple">
<li><strong>no_warning</strong> (<em>boolean, optional</em>) &#8211;
Whether to issue warnings (<code class="docutils literal"><span class="pre">False</span></code>) or not (<code class="docutils literal"><span class="pre">True</span></code>) when
communicating with the minimizer fails. Defaults to <code class="docutils literal"><span class="pre">False</span></code>.</li>
<li><strong>Valid keyword argument names are parameter names. The keyword arguments</strong></li>
<li><strong>themselves may be floats (parameter values) or 2-tuples containing the</strong></li>
<li><strong>parameter values and the parameter error in that order</strong></li>
<li><strong>*&lt;parameter_name&gt;*</strong> (<em>float or 2-tuple of floats, optional</em>) &#8211;
Set the parameter with the name &lt;&#8217;parameter_name&#8217;&gt; to the value
given. If a 2-tuple is given, the first element is understood
to be the value and the second to be the parameter error.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="attribute">
<dt id="kafe.fit.Fit.xdata">
<code class="descname">xdata</code><em class="property"> = None</em><a class="headerlink" href="#kafe.fit.Fit.xdata" title="Permalink to this definition">¶</a></dt>
<dd><p>the <cite>x</cite> coordinates of the data points used for this <cite>Fit</cite></p>
</dd></dl>

<dl class="attribute">
<dt id="kafe.fit.Fit.ydata">
<code class="descname">ydata</code><em class="property"> = None</em><a class="headerlink" href="#kafe.fit.Fit.ydata" title="Permalink to this definition">¶</a></dt>
<dd><p>the <cite>y</cite> coordinates of the data points used for this <cite>Fit</cite></p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="kafe.fit.GaussianConstraint">
<em class="property">class </em><code class="descclassname">kafe.fit.</code><code class="descname">GaussianConstraint</code><span class="sig-paren">(</span><em>constraint</em>, <em>cov_mat=None</em><span class="sig-paren">)</span><a class="headerlink" href="#kafe.fit.GaussianConstraint" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal"><span class="pre">object</span></code></p>
<p>Object used to constrain parameters. The object stores for each constrain
the constrained parameters, the errors, the id of the parameter (the place
at which each parameter is located in parameter_constrain) and the inverse
covariance matrix of the constrained parameters.
The class gives a tool to calculate the chi2 penalty term for the given
constrained parameters, where the fitted parameter_values must be given.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>constraint</strong> (<em>list of two iterables</em>) &#8211; The first iterable (<img class="math" src="_images/math/64c4f0a6c762f78fa753a951fc8aa597d789bad6.png" alt="{c_i}"/>) contains the constrained parameters&#8217;
expected values and the second iterable (<img class="math" src="_images/math/7b4f3ec54d67fc071e930e51b6097e4d2e57c5c2.png" alt="{\sigma_i}"/>) contains
the constraint uncertainties. A parameter with constraint uncertainty
set to 0 remains unconstrained.</td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">Keyword Arguments:</th></tr>
<tr class="field-even field"><td>&nbsp;</td><td class="field-body"><strong>cov_mat</strong> (<em>&#8216;numpy matrix&#8217;</em>) &#8211;
Contains the covariance matrix of the constrains. The inverse covariance
matrix will be saved to safe computing time.</td>
</tr>
</tbody>
</table>
<dl class="method">
<dt id="kafe.fit.GaussianConstraint.calculate_chi2_penalty">
<code class="descname">calculate_chi2_penalty</code><span class="sig-paren">(</span><em>parameter_values</em><span class="sig-paren">)</span><a class="headerlink" href="#kafe.fit.GaussianConstraint.calculate_chi2_penalty" title="Permalink to this definition">¶</a></dt>
<dd><p>Calculates the <img class="math" src="_images/math/8bd0685e3bf9101859d24cf0e851651f182364c9.png" alt="\chi^2"/> penalty for the given constraint
parameter. This function gets called in the <img class="math" src="_images/math/8bd0685e3bf9101859d24cf0e851651f182364c9.png" alt="\chi^2"/> function
and returns a penalty term.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>parameter_values</strong> (<em>list/tuple</em>) &#8211; The values of the parameters at which <img class="math" src="_images/math/14546c27a7b929642f7840acca5f851c503ea109.png" alt="f(x)"/> should be evaluated.</td>
</tr>
</tbody>
</table>
</dd></dl>

</dd></dl>

<dl class="function">
<dt id="kafe.fit.build_fit">
<code class="descclassname">kafe.fit.</code><code class="descname">build_fit</code><span class="sig-paren">(</span><em>dataset</em>, <em>fit_function</em>, <em>fit_label='untitled'</em>, <em>fit_name=None</em>, <em>initial_fit_parameters=None</em>, <em>constrained_parameters=None</em><span class="sig-paren">)</span><a class="headerlink" href="#kafe.fit.build_fit" title="Permalink to this definition">¶</a></dt>
<dd><p>This helper fuction creates a <a class="reference internal" href="#kafe.fit.Fit" title="kafe.fit.Fit"><code class="xref py py-class docutils literal"><span class="pre">Fit</span></code></a> from a series of
keyword arguments.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>dataset</strong> (a <em>kafe</em> <a class="reference internal" href="#kafe.dataset.Dataset" title="kafe.dataset.Dataset"><code class="xref py py-class docutils literal"><span class="pre">Dataset</span></code></a>) &#8211; </li>
<li><strong>fit_function</strong> (<em>a Python function, optionally with</em>) &#8211; <code class="docutils literal"><span class="pre">&#64;FitFunction</span></code>, <code class="docutils literal"><span class="pre">&#64;LATEX</span></code> and <code class="docutils literal"><span class="pre">&#64;FitFunction</span></code> decorators</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">Keyword Arguments:</th></tr>
<tr class="field-even field"><td>&nbsp;</td><td class="field-body"><ul class="first simple">
<li><strong>fit_label</strong> (<em>LaTeX label for this fit, optional</em>) &#8211;
Defaults to &#8220;untitled&#8221;</li>
<li><strong>fit_name</strong> (<em>name for this fit, optional</em>) &#8211;
Defaults to the dataset name</li>
<li><strong>initial_fit_parameters</strong> (<code class="docutils literal"><span class="pre">None</span></code> or 2-tuple of list, sequence of floats) &#8211;
specifying initial parameter values and errors</li>
<li><strong>constrained_parameters</strong> (<code class="docutils literal"><span class="pre">None</span></code> or 3-tuple of list, tuple/<cite>np.array</cite>) &#8211;
of one string and 2 floats specifiying the names, values and
uncertainties of constraints to apply to model parameters</li>
</ul>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"></p>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last"><a class="reference internal" href="#kafe.fit.Fit" title="kafe.fit.Fit"><code class="xref py py-class docutils literal"><span class="pre">Fit</span></code></a> object</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="kafe.fit.chi2">
<code class="descclassname">kafe.fit.</code><code class="descname">chi2</code><span class="sig-paren">(</span><em>xdata</em>, <em>ydata</em>, <em>cov_mat</em>, <em>fit_function</em>, <em>parameter_values</em>, <em>constrain=None</em><span class="sig-paren">)</span><a class="headerlink" href="#kafe.fit.chi2" title="Permalink to this definition">¶</a></dt>
<dd><p>The <img class="math" src="_images/math/8bd0685e3bf9101859d24cf0e851651f182364c9.png" alt="\chi^2"/> implementation. Calculates <img class="math" src="_images/math/8bd0685e3bf9101859d24cf0e851651f182364c9.png" alt="\chi^2"/> according
to the formula:</p>
<div class="math">
<p><img src="_images/math/27172a9488224389d0fef86d4228e1502d25ef01.png" alt="\chi^2 = \lambda^T C^{-1} \lambda"/></p>
</div><p>Here, <img class="math" src="_images/math/1ab0134b6e0837594649c75a2ed83cfd85a2d03d.png" alt="\lambda"/> is the residual vector <img class="math" src="_images/math/6d15ad67c37319bdb099550e3b9672ca842d2397.png" alt="\lambda = \vec{y} -
\vec{f}(\vec{x})"/> and <img class="math" src="_images/math/2bcc65482aa8e15cd4c9e9f2542451fb4e971a91.png" alt="C"/> is the covariance matrix.</p>
<p>If a constraint <img class="math" src="_images/math/967fe6f3987922c3eb623a4bc07f6971d770b9e0.png" alt="c_i\pm\sigma_i"/> is applied to a parameter <img class="math" src="_images/math/be005a6163eb06f81800d3f41ee8408927fec9d7.png" alt="p_i"/>,
a <cite>penalty term</cite> is added for each constrained parameter:</p>
<div class="math">
<p><img src="_images/math/e1f0806992e989796d54ce2a04ef21d7edc033bc.png" alt="\chi^2_{\text{cons}} = \chi^2 + \sum_i{ \left( \frac{p_i - c_i}{\sigma_i} \right)^2 }"/></p>
</div><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>xdata</strong> (<em>iterable</em>) &#8211; The <em>x</em> measurement data</li>
<li><strong>ydata</strong> (<em>iterable</em>) &#8211; The <em>y</em> measurement data</li>
<li><strong>cov_mat</strong> (<cite>numpy.matrix</cite>) &#8211; The total covariance matrix</li>
<li><strong>fit_function</strong> (<em>function</em>) &#8211; The fit function <img class="math" src="_images/math/14546c27a7b929642f7840acca5f851c503ea109.png" alt="f(x)"/></li>
<li><strong>parameter_values</strong> (<em>list/tuple</em>) &#8211; The values of the parameters at which <img class="math" src="_images/math/14546c27a7b929642f7840acca5f851c503ea109.png" alt="f(x)"/> should be evaluated.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">Keyword Arguments:</th></tr>
<tr class="field-even field"><td>&nbsp;</td><td class="field-body"><p class="first last"><strong>constrain</strong> (<code class="docutils literal"><span class="pre">None</span></code> or dictionary , optional) &#8211;
The key of the dictionary holds the parameter ids,
while the values are GaussianConstraint objects
with values, errors and correlation of the parameters.</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="kafe.fit.round_to_significance">
<code class="descclassname">kafe.fit.</code><code class="descname">round_to_significance</code><span class="sig-paren">(</span><em>value</em>, <em>error</em>, <em>significance=2</em><span class="sig-paren">)</span><a class="headerlink" href="#kafe.fit.round_to_significance" title="Permalink to this definition">¶</a></dt>
<dd><p>Rounds the error to the established number of significant digits, then
rounds the value to the same order of magnitude as the error.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>value</strong> (<em>float</em>) &#8211; value to round to significance</li>
<li><strong>error</strong> (<em>float</em>) &#8211; uncertainty of the value</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">Keyword Arguments:</th></tr>
<tr class="field-even field"><td>&nbsp;</td><td class="field-body"><p class="first last"><strong>significance</strong> (<em>int, optional</em>) &#8211;
number of significant digits of the error to consider</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</div>
<div class="section" id="module-kafe.plot">
<span id="plot-graphical-representation-of-a-fit-kafe-plot"></span><h3><code class="docutils literal"><span class="pre">Plot</span></code>: Graphical representation of a <code class="docutils literal"><span class="pre">Fit</span></code> (<a class="reference internal" href="#module-kafe.plot" title="kafe.plot"><code class="xref py py-mod docutils literal"><span class="pre">kafe.plot</span></code></a>)<a class="headerlink" href="#module-kafe.plot" title="Permalink to this headline">¶</a></h3>
<span class="target" id="module-plot"></span><dl class="class">
<dt id="kafe.plot.Plot">
<em class="property">class </em><code class="descclassname">kafe.plot.</code><code class="descname">Plot</code><span class="sig-paren">(</span><em>*fits</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#kafe.plot.Plot" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal"><span class="pre">object</span></code></p>
<p>The constuctor accepts a series of <cite>Fit</cite> objects as positional
arguments. Some keyword arguments can be provided to override
the defaults.</p>
<dl class="attribute">
<dt id="kafe.plot.Plot.axis_labels">
<code class="descname">axis_labels</code><em class="property"> = None</em><a class="headerlink" href="#kafe.plot.Plot.axis_labels" title="Permalink to this definition">¶</a></dt>
<dd><p>axis labels</p>
</dd></dl>

<dl class="method">
<dt id="kafe.plot.Plot.compute_plot_range">
<code class="descname">compute_plot_range</code><span class="sig-paren">(</span><em>include_error_bars=True</em><span class="sig-paren">)</span><a class="headerlink" href="#kafe.plot.Plot.compute_plot_range" title="Permalink to this definition">¶</a></dt>
<dd><p>Compute the span of all child datasets and sets the plot range to that</p>
</dd></dl>

<dl class="method">
<dt id="kafe.plot.Plot.draw_fit_parameters_box">
<code class="descname">draw_fit_parameters_box</code><span class="sig-paren">(</span><em>plot_spec=0</em>, <em>force_show_uncertainties=False</em><span class="sig-paren">)</span><a class="headerlink" href="#kafe.plot.Plot.draw_fit_parameters_box" title="Permalink to this definition">¶</a></dt>
<dd><p>Draw the parameter box to the canvas</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>plot_spec</strong> (<em>int, list of ints, string or None (optional, default: 0)</em>) &#8211; Specify the plot id of the plot for which to draw the parameters.
Passing 0 will only draw the parameter box for the first plot, and
so on. Passing a list of ints will only draw the parameters for
plot ids inside the list. Passing <code class="docutils literal"><span class="pre">'all'</span></code> will print parameters
for all plots. Passing <code class="docutils literal"><span class="pre">None</span></code> will return immediately doing
nothing.</li>
<li><strong>force_show_uncertainties</strong> (<em>boolean (optional, default: False)</em>) &#8211; If <code class="docutils literal"><span class="pre">True</span></code>, shows uncertainties even for Datasets without error
data. Note that in that case these values are meaningless!</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="kafe.plot.Plot.draw_legend">
<code class="descname">draw_legend</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#kafe.plot.Plot.draw_legend" title="Permalink to this definition">¶</a></dt>
<dd><p>Draw the plot legend to the canvas</p>
</dd></dl>

<dl class="method">
<dt id="kafe.plot.Plot.extend_span">
<code class="descname">extend_span</code><span class="sig-paren">(</span><em>axis</em>, <em>new_span</em><span class="sig-paren">)</span><a class="headerlink" href="#kafe.plot.Plot.extend_span" title="Permalink to this definition">¶</a></dt>
<dd><p>Expand the span of the current plot.</p>
<p>This method extends the current plot span to include <cite>new_span</cite></p>
</dd></dl>

<dl class="attribute">
<dt id="kafe.plot.Plot.fits">
<code class="descname">fits</code><em class="property"> = None</em><a class="headerlink" href="#kafe.plot.Plot.fits" title="Permalink to this definition">¶</a></dt>
<dd><p>list of <code class="xref py py-obj docutils literal"><span class="pre">Fit</span></code> objects to plot</p>
</dd></dl>

<dl class="method">
<dt id="kafe.plot.Plot.init_plots">
<code class="descname">init_plots</code><span class="sig-paren">(</span><em>**kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#kafe.plot.Plot.init_plots" title="Permalink to this definition">¶</a></dt>
<dd><p>Initialize the plots for each fit.</p>
</dd></dl>

<dl class="method">
<dt id="kafe.plot.Plot.on_draw">
<code class="descname">on_draw</code><span class="sig-paren">(</span><em>event</em><span class="sig-paren">)</span><a class="headerlink" href="#kafe.plot.Plot.on_draw" title="Permalink to this definition">¶</a></dt>
<dd><p>Function to call when a draw event occurs.</p>
</dd></dl>

<dl class="method">
<dt id="kafe.plot.Plot.plot">
<code class="descname">plot</code><span class="sig-paren">(</span><em>p_id</em>, <em>show_data=True</em>, <em>show_function=True</em>, <em>show_band=True</em><span class="sig-paren">)</span><a class="headerlink" href="#kafe.plot.Plot.plot" title="Permalink to this definition">¶</a></dt>
<dd><p>Plot the <cite>Fit</cite> object with the number <cite>p_id</cite> to its figure.</p>
</dd></dl>

<dl class="method">
<dt id="kafe.plot.Plot.plot_all">
<code class="descname">plot_all</code><span class="sig-paren">(</span><em>show_info_for='all'</em>, <em>show_data_for='all'</em>, <em>show_function_for='all'</em>, <em>show_band_for='meaningful'</em><span class="sig-paren">)</span><a class="headerlink" href="#kafe.plot.Plot.plot_all" title="Permalink to this definition">¶</a></dt>
<dd><p>Plot every <cite>Fit</cite> object to its figure.</p>
</dd></dl>

<dl class="attribute">
<dt id="kafe.plot.Plot.plot_range">
<code class="descname">plot_range</code><em class="property"> = None</em><a class="headerlink" href="#kafe.plot.Plot.plot_range" title="Permalink to this definition">¶</a></dt>
<dd><p>plot range</p>
</dd></dl>

<dl class="attribute">
<dt id="kafe.plot.Plot.plot_style">
<code class="descname">plot_style</code><em class="property"> = None</em><a class="headerlink" href="#kafe.plot.Plot.plot_style" title="Permalink to this definition">¶</a></dt>
<dd><p>plot style</p>
</dd></dl>

<dl class="method">
<dt id="kafe.plot.Plot.save">
<code class="descname">save</code><span class="sig-paren">(</span><em>output_file</em><span class="sig-paren">)</span><a class="headerlink" href="#kafe.plot.Plot.save" title="Permalink to this definition">¶</a></dt>
<dd><p>Save the <cite>Plot</cite> to a file.</p>
</dd></dl>

<dl class="method">
<dt id="kafe.plot.Plot.set_axis_scale">
<code class="descname">set_axis_scale</code><span class="sig-paren">(</span><em>axis</em>, <em>scale_type</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#kafe.plot.Plot.set_axis_scale" title="Permalink to this definition">¶</a></dt>
<dd><p>Set the scale for an axis.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>axis</strong> (<em>&#8216;&#8217;x&#8217;&#8217; or &#8216;&#8217;y&#8217;&#8216;</em>) &#8211; Axis for which to set the scale.</li>
<li><strong>scale_type</strong> (<em>&#8216;&#8217;linear&#8217;&#8217; or &#8216;&#8217;log&#8217;&#8216;</em>) &#8211; Type of scale to set for the axis.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">Keyword Arguments:</th></tr>
<tr class="field-even field"><td>&nbsp;</td><td class="field-body"><ul class="first last simple">
<li><strong>**basex**</strong> (<em>int</em>) &#8211;
Base of the &#8216;&#8217;x&#8217;&#8217; axis scale logarithm. Only relevant for log
scales.</li>
<li><strong>**basey**</strong> (<em>int</em>) &#8211;
Base of the &#8216;&#8217;y&#8217;&#8217; axis scale logarithm. Only relevant for log
scales.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="kafe.plot.Plot.show">
<code class="descname">show</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#kafe.plot.Plot.show" title="Permalink to this definition">¶</a></dt>
<dd><p>Show graphics in one or more matplotlib interactive windows.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">This shows all figures/plots generated before it is called. Because
of the way <code class="docutils literal"><span class="pre">matplotlib</span></code> handles some plotting parameters
(<code class="docutils literal"><span class="pre">matplotlib.rcParams</span></code>) these cannot be set individually for each
figure before it is displayed. This means that all figures will be
shown with the same plot style: that of the <cite>Plot</cite> object from
which show() is called.</p>
</div>
</dd></dl>

<dl class="attribute">
<dt id="kafe.plot.Plot.show_legend">
<code class="descname">show_legend</code><em class="property"> = None</em><a class="headerlink" href="#kafe.plot.Plot.show_legend" title="Permalink to this definition">¶</a></dt>
<dd><p>whether to show the plot legend (<code class="docutils literal"><span class="pre">True</span></code>) or not (<code class="docutils literal"><span class="pre">False</span></code>)</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="kafe.plot.PlotStyle">
<em class="property">class </em><code class="descclassname">kafe.plot.</code><code class="descname">PlotStyle</code><a class="headerlink" href="#kafe.plot.PlotStyle" title="Permalink to this definition">¶</a></dt>
<dd><p>Class for specifying a style for a specific plot. This object stores a
progression of marker and line types and colors, as well as preferences
relating to point size and label size. These can be overriden by
overwriting the instance variables directly. A series of <cite>get_...</cite> methods
are provided which go through these lists cyclically.</p>
<dl class="method">
<dt id="kafe.plot.PlotStyle.get_line">
<code class="descname">get_line</code><span class="sig-paren">(</span><em>idm</em><span class="sig-paren">)</span><a class="headerlink" href="#kafe.plot.PlotStyle.get_line" title="Permalink to this definition">¶</a></dt>
<dd><p>Get a specific line type. This runs cyclically through the defined
defaults.</p>
</dd></dl>

<dl class="method">
<dt id="kafe.plot.PlotStyle.get_linecolor">
<code class="descname">get_linecolor</code><span class="sig-paren">(</span><em>idm</em><span class="sig-paren">)</span><a class="headerlink" href="#kafe.plot.PlotStyle.get_linecolor" title="Permalink to this definition">¶</a></dt>
<dd><p>Get a specific line color. This runs cyclically through the defined
defaults.</p>
</dd></dl>

<dl class="method">
<dt id="kafe.plot.PlotStyle.get_marker">
<code class="descname">get_marker</code><span class="sig-paren">(</span><em>idm</em><span class="sig-paren">)</span><a class="headerlink" href="#kafe.plot.PlotStyle.get_marker" title="Permalink to this definition">¶</a></dt>
<dd><p>Get a specific marker type. This runs cyclically through the defined
defaults.</p>
</dd></dl>

<dl class="method">
<dt id="kafe.plot.PlotStyle.get_markercolor">
<code class="descname">get_markercolor</code><span class="sig-paren">(</span><em>idm</em><span class="sig-paren">)</span><a class="headerlink" href="#kafe.plot.PlotStyle.get_markercolor" title="Permalink to this definition">¶</a></dt>
<dd><p>Get a specific marker color. This runs cyclically through the
defined defaults.</p>
</dd></dl>

<dl class="method">
<dt id="kafe.plot.PlotStyle.get_pointsize">
<code class="descname">get_pointsize</code><span class="sig-paren">(</span><em>idm</em><span class="sig-paren">)</span><a class="headerlink" href="#kafe.plot.PlotStyle.get_pointsize" title="Permalink to this definition">¶</a></dt>
<dd><p>Get a specific point size. This runs cyclically through the defined
defaults.</p>
</dd></dl>

</dd></dl>

<dl class="function">
<dt id="kafe.plot.label_to_latex">
<code class="descclassname">kafe.plot.</code><code class="descname">label_to_latex</code><span class="sig-paren">(</span><em>label</em><span class="sig-paren">)</span><a class="headerlink" href="#kafe.plot.label_to_latex" title="Permalink to this definition">¶</a></dt>
<dd><p>Generates a simple LaTeX-formatted label from a plain-text label.
This treats isolated characters and words beginning with a backslash
as mathematical expressions and surround them with $ signs accordingly.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>label</strong> (<em>string</em>) &#8211; Plain-text string to convert to LaTeX.</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="kafe.plot.pad_span">
<code class="descclassname">kafe.plot.</code><code class="descname">pad_span</code><span class="sig-paren">(</span><em>span</em>, <em>pad_coeff=1</em>, <em>additional_pad=None</em><span class="sig-paren">)</span><a class="headerlink" href="#kafe.plot.pad_span" title="Permalink to this definition">¶</a></dt>
<dd><p>Enlarges the interval <cite>span</cite> (list of two floats) symmetrically around
its center to length <cite>pad_coeff</cite>. Optionally, an <cite>additional_pad</cite> argument
can be specified. The returned span is then additionally enlarged by that
amount.</p>
<p><cite>additional_pad</cite> can also be a list of two floats which specifies an
asymmetric amount by which to enlarge the span. Note that in this case,
positive entries in <cite>additional_pad</cite> will enlarge the span (move the
interval end away from the interval center) and negative amounts will
shorten it (move the interval end towards the interval center).</p>
</dd></dl>

<dl class="function">
<dt id="kafe.plot.pad_span_log">
<code class="descclassname">kafe.plot.</code><code class="descname">pad_span_log</code><span class="sig-paren">(</span><em>span</em>, <em>pad_coeff=1</em>, <em>additional_pad=None</em>, <em>base=10</em><span class="sig-paren">)</span><a class="headerlink" href="#kafe.plot.pad_span_log" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</div>
</div>
<div class="section" id="interfaces-to-external-packages">
<h2>Interfaces to external packages<a class="headerlink" href="#interfaces-to-external-packages" title="Permalink to this headline">¶</a></h2>
<div class="section" id="module-kafe.minuit">
<span id="interface-to-root-s-tminuit-kafe-minuit"></span><h3>Interface to ROOT&#8217;s <code class="docutils literal"><span class="pre">TMinuit</span></code> (<a class="reference internal" href="#module-kafe.minuit" title="kafe.minuit"><code class="xref py py-mod docutils literal"><span class="pre">kafe.minuit</span></code></a>)<a class="headerlink" href="#module-kafe.minuit" title="Permalink to this headline">¶</a></h3>
<span class="target" id="module-minuit"></span><dl class="data">
<dt id="kafe.minuit.D_MATRIX_ERROR">
<code class="descclassname">kafe.minuit.</code><code class="descname">D_MATRIX_ERROR</code><em class="property"> = {0: 'Error matrix not calculated', 1: 'Error matrix approximate!', 2: 'Error matrix forced positive definite!', 3: 'Error matrix accurate'}</em><a class="headerlink" href="#kafe.minuit.D_MATRIX_ERROR" title="Permalink to this definition">¶</a></dt>
<dd><p>Error matrix status codes</p>
</dd></dl>

<dl class="class">
<dt id="kafe.minuit.Minuit">
<em class="property">class </em><code class="descclassname">kafe.minuit.</code><code class="descname">Minuit</code><span class="sig-paren">(</span><em>number_of_parameters</em>, <em>function_to_minimize</em>, <em>parameter_names</em>, <em>start_parameters</em>, <em>parameter_errors</em>, <em>quiet=True</em>, <em>verbose=False</em><span class="sig-paren">)</span><a class="headerlink" href="#kafe.minuit.Minuit" title="Permalink to this definition">¶</a></dt>
<dd><p>A class for communicating with ROOT&#8217;s function minimizer tool Minuit.</p>
<dl class="method">
<dt id="kafe.minuit.Minuit.FCN_wrapper">
<code class="descname">FCN_wrapper</code><span class="sig-paren">(</span><em>number_of_parameters</em>, <em>derivatives</em>, <em>f</em>, <em>parameters</em>, <em>internal_flag</em><span class="sig-paren">)</span><a class="headerlink" href="#kafe.minuit.Minuit.FCN_wrapper" title="Permalink to this definition">¶</a></dt>
<dd><p>This is actually a function called in <em>ROOT</em> and acting as a C wrapper
for our <cite>FCN</cite>, which is implemented in Python.</p>
<p>This function is called by <cite>Minuit</cite> several times during a fit. It
doesn&#8217;t return anything but modifies one of its arguments (<em>f</em>).
This is <em>ugly</em>, but it&#8217;s how <em>ROOT</em>&#8216;s <code class="docutils literal"><span class="pre">TMinuit</span></code> works. Its argument
structure is fixed and determined by <cite>Minuit</cite>:</p>
<dl class="docutils">
<dt><strong>number_of_parameters</strong> <span class="classifier-delimiter">:</span> <span class="classifier">int</span></dt>
<dd>The number of parameters of the current fit</dd>
<dt><strong>derivatives</strong> <span class="classifier-delimiter">:</span> <span class="classifier">C array</span></dt>
<dd>If the user chooses to calculate the first derivative of the
function inside the <cite>FCN</cite>, this value should be written here. This
interface to <cite>Minuit</cite> ignores this derivative, however, so
calculating this inside the <cite>FCN</cite> has no effect (yet).</dd>
<dt><strong>f</strong> <span class="classifier-delimiter">:</span> <span class="classifier">C array</span></dt>
<dd>The desired function value is in f[0] after execution.</dd>
<dt><strong>parameters</strong> <span class="classifier-delimiter">:</span> <span class="classifier">C array</span></dt>
<dd>A C array of parameters. Is cast to a Python list</dd>
<dt><strong>internal_flag</strong> <span class="classifier-delimiter">:</span> <span class="classifier">int</span></dt>
<dd>A flag allowing for different behaviour of the function.
Can be any integer from 1 (initial run) to 4(normal run). See
<cite>Minuit</cite>&#8216;s specification.</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="kafe.minuit.Minuit.fix_parameter">
<code class="descname">fix_parameter</code><span class="sig-paren">(</span><em>parameter_number</em><span class="sig-paren">)</span><a class="headerlink" href="#kafe.minuit.Minuit.fix_parameter" title="Permalink to this definition">¶</a></dt>
<dd><p>Fix parameter number &lt;<cite>parameter_number</cite>&gt;.</p>
<dl class="docutils">
<dt><strong>parameter_number</strong> <span class="classifier-delimiter">:</span> <span class="classifier">int</span></dt>
<dd>Number of the parameter to fix.</dd>
</dl>
</dd></dl>

<dl class="attribute">
<dt id="kafe.minuit.Minuit.function_to_minimize">
<code class="descname">function_to_minimize</code><em class="property"> = None</em><a class="headerlink" href="#kafe.minuit.Minuit.function_to_minimize" title="Permalink to this definition">¶</a></dt>
<dd><p>the actual <cite>FCN</cite> called in <code class="docutils literal"><span class="pre">FCN_wrapper</span></code></p>
</dd></dl>

<dl class="method">
<dt id="kafe.minuit.Minuit.get_chi2_probability">
<code class="descname">get_chi2_probability</code><span class="sig-paren">(</span><em>n_deg_of_freedom</em><span class="sig-paren">)</span><a class="headerlink" href="#kafe.minuit.Minuit.get_chi2_probability" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the probability that an observed <img class="math" src="_images/math/8bd0685e3bf9101859d24cf0e851651f182364c9.png" alt="\chi^2"/> exceeds
the calculated value of <img class="math" src="_images/math/8bd0685e3bf9101859d24cf0e851651f182364c9.png" alt="\chi^2"/> for this fit by chance,
even for a correct model. In other words, returns the probability that
a worse fit of the model to the data exists. If this is a small value
(typically &lt;5%), this means the fit is pretty bad. For values below
this threshold, the model very probably does not fit the data.</p>
<dl class="docutils">
<dt>n_def_of_freedom <span class="classifier-delimiter">:</span> <span class="classifier">int</span></dt>
<dd>The number of degrees of freedom. This is typically
<img class="math" src="_images/math/9d72e49b1b8bff111c54a0286c8c92a92434e94e.png" alt="n_   ext{datapoints} - n_    ext{parameters}"/>.</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="kafe.minuit.Minuit.get_contour">
<code class="descname">get_contour</code><span class="sig-paren">(</span><em>parameter1</em>, <em>parameter2</em>, <em>n_points=21</em><span class="sig-paren">)</span><a class="headerlink" href="#kafe.minuit.Minuit.get_contour" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a list of points (2-tuples) representing a sampling of
the <img class="math" src="_images/math/49d4d420882348d6c5361c0cbd5bc58e816ead44.png" alt="1\sigma"/> contour of the TMinuit fit. The <code class="docutils literal"><span class="pre">FCN</span></code> has
to be minimized before calling this.</p>
<dl class="docutils">
<dt><strong>parameter1</strong> <span class="classifier-delimiter">:</span> <span class="classifier">int</span></dt>
<dd>ID of the parameter to be displayed on the <cite>x</cite>-axis.</dd>
<dt><strong>parameter2</strong> <span class="classifier-delimiter">:</span> <span class="classifier">int</span></dt>
<dd>ID of the parameter to be displayed on the <cite>y</cite>-axis.</dd>
<dt><em>n_points</em> <span class="classifier-delimiter">:</span> <span class="classifier">int (optional)</span></dt>
<dd>number of points used to draw the contour. Default is 21.</dd>
<dt><em>returns</em> <span class="classifier-delimiter">:</span> <span class="classifier">2-tuple of tuples</span></dt>
<dd>a 2-tuple (x, y) containing <code class="docutils literal"><span class="pre">n_points+1</span></code> points sampled
along the contour. The first point is repeated at the end
of the list to generate a closed contour.</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="kafe.minuit.Minuit.get_error_matrix">
<code class="descname">get_error_matrix</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#kafe.minuit.Minuit.get_error_matrix" title="Permalink to this definition">¶</a></dt>
<dd><p>Retrieves the parameter error matrix from TMinuit.</p>
<p>return : <cite>numpy.matrix</cite></p>
</dd></dl>

<dl class="method">
<dt id="kafe.minuit.Minuit.get_fit_info">
<code class="descname">get_fit_info</code><span class="sig-paren">(</span><em>info</em><span class="sig-paren">)</span><a class="headerlink" href="#kafe.minuit.Minuit.get_fit_info" title="Permalink to this definition">¶</a></dt>
<dd><p>Retrieves other info from <cite>Minuit</cite>.</p>
<dl class="docutils">
<dt><strong>info</strong> <span class="classifier-delimiter">:</span> <span class="classifier">string</span></dt>
<dd><p class="first">Information about the fit to retrieve.
This can be any of the following:</p>
<blockquote class="last">
<div><ul class="simple">
<li><code class="docutils literal"><span class="pre">'fcn'</span></code>: <cite>FCN</cite> value at minimum,</li>
<li><code class="docutils literal"><span class="pre">'edm'</span></code>: estimated distance to minimum</li>
<li><code class="docutils literal"><span class="pre">'err_def'</span></code>: <cite>Minuit</cite> error matrix status code</li>
<li><code class="docutils literal"><span class="pre">'status_code'</span></code>: <cite>Minuit</cite> general status code</li>
</ul>
</div></blockquote>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="kafe.minuit.Minuit.get_parameter_errors">
<code class="descname">get_parameter_errors</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#kafe.minuit.Minuit.get_parameter_errors" title="Permalink to this definition">¶</a></dt>
<dd><p>Retrieves the parameter errors from TMinuit.</p>
<dl class="docutils">
<dt>return <span class="classifier-delimiter">:</span> <span class="classifier">tuple</span></dt>
<dd>Current <cite>Minuit</cite> parameter errors</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="kafe.minuit.Minuit.get_parameter_info">
<code class="descname">get_parameter_info</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#kafe.minuit.Minuit.get_parameter_info" title="Permalink to this definition">¶</a></dt>
<dd><p>Retrieves parameter information from TMinuit.</p>
<dl class="docutils">
<dt>return <span class="classifier-delimiter">:</span> <span class="classifier">list of tuples</span></dt>
<dd><code class="docutils literal"><span class="pre">(parameter_name,</span> <span class="pre">parameter_val,</span> <span class="pre">parameter_error)</span></code></dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="kafe.minuit.Minuit.get_parameter_name">
<code class="descname">get_parameter_name</code><span class="sig-paren">(</span><em>parameter_nr</em><span class="sig-paren">)</span><a class="headerlink" href="#kafe.minuit.Minuit.get_parameter_name" title="Permalink to this definition">¶</a></dt>
<dd><p>Gets the name of parameter number <code class="docutils literal"><span class="pre">parameter_nr</span></code></p>
<dl class="docutils">
<dt><strong>parameter_nr</strong> <span class="classifier-delimiter">:</span> <span class="classifier">int</span></dt>
<dd>Number of the parameter whose name to get.</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="kafe.minuit.Minuit.get_parameter_values">
<code class="descname">get_parameter_values</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#kafe.minuit.Minuit.get_parameter_values" title="Permalink to this definition">¶</a></dt>
<dd><p>Retrieves the parameter values from TMinuit.</p>
<dl class="docutils">
<dt>return <span class="classifier-delimiter">:</span> <span class="classifier">tuple</span></dt>
<dd>Current <cite>Minuit</cite> parameter values</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="kafe.minuit.Minuit.get_profile">
<code class="descname">get_profile</code><span class="sig-paren">(</span><em>parid</em>, <em>n_points=21</em><span class="sig-paren">)</span><a class="headerlink" href="#kafe.minuit.Minuit.get_profile" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a list of points (2-tuples) the profile
the <img class="math" src="_images/math/8bd0685e3bf9101859d24cf0e851651f182364c9.png" alt="\chi^2"/>  of the TMinuit fit.</p>
<dl class="docutils">
<dt><strong>parid</strong> <span class="classifier-delimiter">:</span> <span class="classifier">int</span></dt>
<dd>ID of the parameter to be displayed on the <cite>x</cite>-axis.</dd>
<dt><em>n_points</em> <span class="classifier-delimiter">:</span> <span class="classifier">int (optional)</span></dt>
<dd>number of points used for profile. Default is 21.</dd>
<dt><em>returns</em> <span class="classifier-delimiter">:</span> <span class="classifier">two arrays, par. values and corresp. <img class="math" src="_images/math/8bd0685e3bf9101859d24cf0e851651f182364c9.png" alt="\chi^2"/></span></dt>
<dd>containing <code class="docutils literal"><span class="pre">n_points</span></code> sampled profile points.</dd>
</dl>
</dd></dl>

<dl class="attribute">
<dt id="kafe.minuit.Minuit.max_iterations">
<code class="descname">max_iterations</code><em class="property"> = None</em><a class="headerlink" href="#kafe.minuit.Minuit.max_iterations" title="Permalink to this definition">¶</a></dt>
<dd><p>maximum number of iterations until <code class="docutils literal"><span class="pre">TMinuit</span></code> gives up</p>
</dd></dl>

<dl class="method">
<dt id="kafe.minuit.Minuit.minimize">
<code class="descname">minimize</code><span class="sig-paren">(</span><em>final_fit=True</em>, <em>log_print_level=2</em><span class="sig-paren">)</span><a class="headerlink" href="#kafe.minuit.Minuit.minimize" title="Permalink to this definition">¶</a></dt>
<dd><p>Do the minimization. This calls <cite>Minuit</cite>&#8216;s algorithms <code class="docutils literal"><span class="pre">MIGRAD</span></code>
for minimization and, if <cite>final_fit</cite> is <cite>True</cite>, also <code class="docutils literal"><span class="pre">HESSE</span></code>
for computing/checking the parameter error matrix.</p>
</dd></dl>

<dl class="method">
<dt id="kafe.minuit.Minuit.minos_errors">
<code class="descname">minos_errors</code><span class="sig-paren">(</span><em>log_print_level=1</em><span class="sig-paren">)</span><a class="headerlink" href="#kafe.minuit.Minuit.minos_errors" title="Permalink to this definition">¶</a></dt>
<dd><p>Get (asymmetric) parameter uncertainties from MINOS
algorithm. This calls <cite>Minuit</cite>&#8216;s algorithms <code class="docutils literal"><span class="pre">MINOS</span></code>,
which determines parameter uncertainties using profiling
of the chi2 function.</p>
<dl class="docutils">
<dt>returns <span class="classifier-delimiter">:</span> <span class="classifier">tuple</span></dt>
<dd>A tuple of [err+, err-, parabolic error, global correlation]</dd>
</dl>
</dd></dl>

<dl class="attribute">
<dt id="kafe.minuit.Minuit.name">
<code class="descname">name</code><em class="property"> = None</em><a class="headerlink" href="#kafe.minuit.Minuit.name" title="Permalink to this definition">¶</a></dt>
<dd><p>the name of this minimizer type</p>
</dd></dl>

<dl class="attribute">
<dt id="kafe.minuit.Minuit.number_of_parameters">
<code class="descname">number_of_parameters</code><em class="property"> = None</em><a class="headerlink" href="#kafe.minuit.Minuit.number_of_parameters" title="Permalink to this definition">¶</a></dt>
<dd><p>number of parameters to minimize for</p>
</dd></dl>

<dl class="method">
<dt id="kafe.minuit.Minuit.release_parameter">
<code class="descname">release_parameter</code><span class="sig-paren">(</span><em>parameter_number</em><span class="sig-paren">)</span><a class="headerlink" href="#kafe.minuit.Minuit.release_parameter" title="Permalink to this definition">¶</a></dt>
<dd><p>Release parameter number &lt;<cite>parameter_number</cite>&gt;.</p>
<dl class="docutils">
<dt><strong>parameter_number</strong> <span class="classifier-delimiter">:</span> <span class="classifier">int</span></dt>
<dd>Number of the parameter to release.</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="kafe.minuit.Minuit.reset">
<code class="descname">reset</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#kafe.minuit.Minuit.reset" title="Permalink to this definition">¶</a></dt>
<dd><p>Execute TMinuit&#8217;s <cite>mnrset</cite> method.</p>
</dd></dl>

<dl class="method">
<dt id="kafe.minuit.Minuit.set_err">
<code class="descname">set_err</code><span class="sig-paren">(</span><em>up_value=1.0</em><span class="sig-paren">)</span><a class="headerlink" href="#kafe.minuit.Minuit.set_err" title="Permalink to this definition">¶</a></dt>
<dd><p>Sets the <code class="docutils literal"><span class="pre">UP</span></code> value for Minuit.</p>
<dl class="docutils">
<dt><em>up_value</em> <span class="classifier-delimiter">:</span> <span class="classifier">float (optional, default: 1.0)</span></dt>
<dd>This is the value by which <cite>FCN</cite> is expected to change.</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="kafe.minuit.Minuit.set_parameter_errors">
<code class="descname">set_parameter_errors</code><span class="sig-paren">(</span><em>parameter_errors=None</em><span class="sig-paren">)</span><a class="headerlink" href="#kafe.minuit.Minuit.set_parameter_errors" title="Permalink to this definition">¶</a></dt>
<dd><p>Sets the fit parameter errors. If parameter_values=`None`, sets the
error to 10% of the parameter value.</p>
</dd></dl>

<dl class="method">
<dt id="kafe.minuit.Minuit.set_parameter_names">
<code class="descname">set_parameter_names</code><span class="sig-paren">(</span><em>parameter_names</em><span class="sig-paren">)</span><a class="headerlink" href="#kafe.minuit.Minuit.set_parameter_names" title="Permalink to this definition">¶</a></dt>
<dd><p>Sets the fit parameters. If parameter_values=`None`, tries to infer
defaults from the function_to_minimize.</p>
</dd></dl>

<dl class="method">
<dt id="kafe.minuit.Minuit.set_parameter_values">
<code class="descname">set_parameter_values</code><span class="sig-paren">(</span><em>parameter_values</em><span class="sig-paren">)</span><a class="headerlink" href="#kafe.minuit.Minuit.set_parameter_values" title="Permalink to this definition">¶</a></dt>
<dd><dl class="docutils">
<dt>Sets the fit parameters. If parameter_values=`None`, tries to infer</dt>
<dd>defaults from the function_to_minimize.</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="kafe.minuit.Minuit.set_print_level">
<code class="descname">set_print_level</code><span class="sig-paren">(</span><em>print_level=1</em><span class="sig-paren">)</span><a class="headerlink" href="#kafe.minuit.Minuit.set_print_level" title="Permalink to this definition">¶</a></dt>
<dd><p>Sets the print level for Minuit.</p>
<dl class="docutils">
<dt><em>print_level</em> <span class="classifier-delimiter">:</span> <span class="classifier">int (optional, default: 1 (frugal output))</span></dt>
<dd>Tells <code class="docutils literal"><span class="pre">TMinuit</span></code> how much output to generate. The higher this
value, the more output it generates.</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="kafe.minuit.Minuit.set_strategy">
<code class="descname">set_strategy</code><span class="sig-paren">(</span><em>strategy_id=1</em><span class="sig-paren">)</span><a class="headerlink" href="#kafe.minuit.Minuit.set_strategy" title="Permalink to this definition">¶</a></dt>
<dd><p>Sets the strategy Minuit.</p>
<dl class="docutils">
<dt><em>strategy_id</em> <span class="classifier-delimiter">:</span> <span class="classifier">int (optional, default: 1 (optimized))</span></dt>
<dd>Tells <code class="docutils literal"><span class="pre">TMinuit</span></code> to use a certain strategy. Refer to <code class="docutils literal"><span class="pre">TMinuit</span></code>&#8216;s
documentation for available strategies.</dd>
</dl>
</dd></dl>

<dl class="attribute">
<dt id="kafe.minuit.Minuit.tolerance">
<code class="descname">tolerance</code><em class="property"> = None</em><a class="headerlink" href="#kafe.minuit.Minuit.tolerance" title="Permalink to this definition">¶</a></dt>
<dd><p><code class="docutils literal"><span class="pre">TMinuit</span></code> tolerance</p>
</dd></dl>

<dl class="method">
<dt id="kafe.minuit.Minuit.update_parameter_data">
<code class="descname">update_parameter_data</code><span class="sig-paren">(</span><em>show_warnings=False</em><span class="sig-paren">)</span><a class="headerlink" href="#kafe.minuit.Minuit.update_parameter_data" title="Permalink to this definition">¶</a></dt>
<dd><p>(Re-)Sets the parameter names, values and step size on the
C++ side of Minuit.</p>
</dd></dl>

</dd></dl>

<dl class="data">
<dt id="kafe.minuit.P_DETAIL_LEVEL">
<code class="descclassname">kafe.minuit.</code><code class="descname">P_DETAIL_LEVEL</code><em class="property"> = 1</em><a class="headerlink" href="#kafe.minuit.P_DETAIL_LEVEL" title="Permalink to this definition">¶</a></dt>
<dd><p>default level of detail for TMinuit&#8217;s output
(typical range: -1 to 3, default: 1)</p>
</dd></dl>

</div>
<div class="section" id="module-kafe.iminuit_wrapper">
<span id="interface-to-iminuit-kafe-iminuit-wrapper"></span><h3>Interface to <code class="docutils literal"><span class="pre">iminuit</span></code> (<a class="reference internal" href="#module-kafe.iminuit_wrapper" title="kafe.iminuit_wrapper"><code class="xref py py-mod docutils literal"><span class="pre">kafe.iminuit_wrapper</span></code></a>)<a class="headerlink" href="#module-kafe.iminuit_wrapper" title="Permalink to this headline">¶</a></h3>
<span class="target" id="module-iminuit"></span><dl class="data">
<dt id="kafe.iminuit_wrapper.D_MATRIX_ERROR">
<code class="descclassname">kafe.iminuit_wrapper.</code><code class="descname">D_MATRIX_ERROR</code><em class="property"> = {0: 'Error matrix not calculated', 1: 'Error matrix approximate!', 2: 'Error matrix forced positive definite!', 3: 'Error matrix accurate'}</em><a class="headerlink" href="#kafe.iminuit_wrapper.D_MATRIX_ERROR" title="Permalink to this definition">¶</a></dt>
<dd><p>Error matrix status codes</p>
</dd></dl>

<dl class="class">
<dt id="kafe.iminuit_wrapper.IMinuit">
<em class="property">class </em><code class="descclassname">kafe.iminuit_wrapper.</code><code class="descname">IMinuit</code><span class="sig-paren">(</span><em>number_of_parameters</em>, <em>function_to_minimize</em>, <em>parameter_names</em>, <em>start_parameters</em>, <em>parameter_errors</em>, <em>quiet=True</em>, <em>verbose=False</em><span class="sig-paren">)</span><a class="headerlink" href="#kafe.iminuit_wrapper.IMinuit" title="Permalink to this definition">¶</a></dt>
<dd><p>A wrapper class for iminuit.</p>
<dl class="method">
<dt id="kafe.iminuit_wrapper.IMinuit.FCN_wrapper">
<code class="descname">FCN_wrapper</code><span class="sig-paren">(</span><em>**kw_parameters</em><span class="sig-paren">)</span><a class="headerlink" href="#kafe.iminuit_wrapper.IMinuit.FCN_wrapper" title="Permalink to this definition">¶</a></dt>
<dd><p>This wrapper converts from the &#8220;keyword argument&#8221; way of calling the
function to a &#8220;positional argument&#8221; way, taking into account the order
of the parameters as they appear in <cite>self.parameter_names</cite>.</p>
<p>This mapping is done for each call, so it&#8217;s quite resource intensive,
but this is unavoidable, since external FCNs to minimize expect
positional arguments.</p>
<dl class="docutils">
<dt><strong>kw_parameters</strong> <span class="classifier-delimiter">:</span> <span class="classifier">dict</span></dt>
<dd>Map of parameter name to parameter value.</dd>
</dl>
</dd></dl>

<dl class="attribute">
<dt id="kafe.iminuit_wrapper.IMinuit.errordef">
<code class="descname">errordef</code><em class="property"> = None</em><a class="headerlink" href="#kafe.iminuit_wrapper.IMinuit.errordef" title="Permalink to this definition">¶</a></dt>
<dd><p><code class="docutils literal"><span class="pre">iminuit</span></code> errordef</p>
</dd></dl>

<dl class="method">
<dt id="kafe.iminuit_wrapper.IMinuit.fix_parameter">
<code class="descname">fix_parameter</code><span class="sig-paren">(</span><em>parameter</em><span class="sig-paren">)</span><a class="headerlink" href="#kafe.iminuit_wrapper.IMinuit.fix_parameter" title="Permalink to this definition">¶</a></dt>
<dd><p>Fix parameter &lt;<cite>parameter</cite>&gt;.</p>
<dl class="docutils">
<dt><strong>parameter</strong> <span class="classifier-delimiter">:</span> <span class="classifier">string</span></dt>
<dd>Name of the parameter to fix.</dd>
</dl>
</dd></dl>

<dl class="attribute">
<dt id="kafe.iminuit_wrapper.IMinuit.function_to_minimize">
<code class="descname">function_to_minimize</code><em class="property"> = None</em><a class="headerlink" href="#kafe.iminuit_wrapper.IMinuit.function_to_minimize" title="Permalink to this definition">¶</a></dt>
<dd><p>the actual <cite>FCN</cite> called in <code class="docutils literal"><span class="pre">FCN_wrapper</span></code></p>
</dd></dl>

<dl class="method">
<dt id="kafe.iminuit_wrapper.IMinuit.get_chi2_probability">
<code class="descname">get_chi2_probability</code><span class="sig-paren">(</span><em>n_deg_of_freedom</em><span class="sig-paren">)</span><a class="headerlink" href="#kafe.iminuit_wrapper.IMinuit.get_chi2_probability" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the probability that an observed <img class="math" src="_images/math/8bd0685e3bf9101859d24cf0e851651f182364c9.png" alt="\chi^2"/> exceeds
the calculated value of <img class="math" src="_images/math/8bd0685e3bf9101859d24cf0e851651f182364c9.png" alt="\chi^2"/> for this fit by chance,
even for a correct model. In other words, returns the probability that
a worse fit of the model to the data exists. If this is a small value
(typically &lt;5%), this means the fit is pretty bad. For values below
this threshold, the model very probably does not fit the data.</p>
<dl class="docutils">
<dt>n_def_of_freedom <span class="classifier-delimiter">:</span> <span class="classifier">int</span></dt>
<dd>The number of degrees of freedom. This is typically
<img class="math" src="_images/math/9d72e49b1b8bff111c54a0286c8c92a92434e94e.png" alt="n_   ext{datapoints} - n_    ext{parameters}"/>.</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="kafe.iminuit_wrapper.IMinuit.get_contour">
<code class="descname">get_contour</code><span class="sig-paren">(</span><em>parameter1</em>, <em>parameter2</em>, <em>n_points=21</em><span class="sig-paren">)</span><a class="headerlink" href="#kafe.iminuit_wrapper.IMinuit.get_contour" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a list of points (2-tuples) representing a sampling of
the <img class="math" src="_images/math/49d4d420882348d6c5361c0cbd5bc58e816ead44.png" alt="1\sigma"/> contour of the iminuit fit. The <code class="docutils literal"><span class="pre">FCN</span></code> has
to be minimized before calling this.</p>
<dl class="docutils">
<dt><strong>parameter1</strong> <span class="classifier-delimiter">:</span> <span class="classifier">int</span></dt>
<dd>ID of the parameter to be displayed on the <cite>x</cite>-axis.</dd>
<dt><strong>parameter2</strong> <span class="classifier-delimiter">:</span> <span class="classifier">int</span></dt>
<dd>ID of the parameter to be displayed on the <cite>y</cite>-axis.</dd>
<dt><em>n_points</em> <span class="classifier-delimiter">:</span> <span class="classifier">int (optional)</span></dt>
<dd>number of points used to draw the contour. Default is 21.</dd>
<dt><em>returns</em> <span class="classifier-delimiter">:</span> <span class="classifier">2-tuple of tuples</span></dt>
<dd>a 2-tuple (x, y) containing <code class="docutils literal"><span class="pre">n_points+1</span></code> points sampled
along the contour. The first point is repeated at the end
of the list to generate a closed contour.</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="kafe.iminuit_wrapper.IMinuit.get_error_matrix">
<code class="descname">get_error_matrix</code><span class="sig-paren">(</span><em>correlation=False</em><span class="sig-paren">)</span><a class="headerlink" href="#kafe.iminuit_wrapper.IMinuit.get_error_matrix" title="Permalink to this definition">¶</a></dt>
<dd><p>Retrieves the parameter error matrix from iminuit.</p>
<dl class="docutils">
<dt>correlation <span class="classifier-delimiter">:</span> <span class="classifier">boolean (optional, default <code class="docutils literal"><span class="pre">False</span></code>)</span></dt>
<dd>If <code class="docutils literal"><span class="pre">True</span></code>, return correlation matrix, else return
covariance matrix.</dd>
</dl>
<p>return : <cite>numpy.matrix</cite></p>
</dd></dl>

<dl class="method">
<dt id="kafe.iminuit_wrapper.IMinuit.get_fit_info">
<code class="descname">get_fit_info</code><span class="sig-paren">(</span><em>info</em><span class="sig-paren">)</span><a class="headerlink" href="#kafe.iminuit_wrapper.IMinuit.get_fit_info" title="Permalink to this definition">¶</a></dt>
<dd><p>Retrieves other info from <cite>Minuit</cite>.</p>
<dl class="docutils">
<dt><strong>info</strong> <span class="classifier-delimiter">:</span> <span class="classifier">string</span></dt>
<dd><p class="first">Information about the fit to retrieve.
This can be any of the following:</p>
<blockquote class="last">
<div><ul class="simple">
<li><code class="docutils literal"><span class="pre">'fcn'</span></code>: <cite>FCN</cite> value at minimum,</li>
<li><code class="docutils literal"><span class="pre">'edm'</span></code>: estimated distance to minimum</li>
<li><code class="docutils literal"><span class="pre">'err_def'</span></code>: <cite>Minuit</cite> error matrix status code</li>
<li><code class="docutils literal"><span class="pre">'status_code'</span></code>: <cite>Minuit</cite> general status code</li>
</ul>
</div></blockquote>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="kafe.iminuit_wrapper.IMinuit.get_parameter_errors">
<code class="descname">get_parameter_errors</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#kafe.iminuit_wrapper.IMinuit.get_parameter_errors" title="Permalink to this definition">¶</a></dt>
<dd><p>Retrieves the parameter errors from iminuit.</p>
<dl class="docutils">
<dt>return <span class="classifier-delimiter">:</span> <span class="classifier">tuple</span></dt>
<dd>Current <cite>Minuit</cite> parameter errors</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="kafe.iminuit_wrapper.IMinuit.get_parameter_info">
<code class="descname">get_parameter_info</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#kafe.iminuit_wrapper.IMinuit.get_parameter_info" title="Permalink to this definition">¶</a></dt>
<dd><p>Retrieves parameter information from iminuit.</p>
<dl class="docutils">
<dt>return <span class="classifier-delimiter">:</span> <span class="classifier">list of tuples</span></dt>
<dd><code class="docutils literal"><span class="pre">(parameter_name,</span> <span class="pre">parameter_val,</span> <span class="pre">parameter_error)</span></code></dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="kafe.iminuit_wrapper.IMinuit.get_parameter_name">
<code class="descname">get_parameter_name</code><span class="sig-paren">(</span><em>parameter_nr</em><span class="sig-paren">)</span><a class="headerlink" href="#kafe.iminuit_wrapper.IMinuit.get_parameter_name" title="Permalink to this definition">¶</a></dt>
<dd><p>Gets the name of parameter number <code class="docutils literal"><span class="pre">parameter_nr</span></code></p>
<dl class="docutils">
<dt><strong>parameter_nr</strong> <span class="classifier-delimiter">:</span> <span class="classifier">int</span></dt>
<dd>Number of the parameter whose name to get.</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="kafe.iminuit_wrapper.IMinuit.get_parameter_values">
<code class="descname">get_parameter_values</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#kafe.iminuit_wrapper.IMinuit.get_parameter_values" title="Permalink to this definition">¶</a></dt>
<dd><p>Retrieves the parameter values from iminuit.</p>
<dl class="docutils">
<dt>return <span class="classifier-delimiter">:</span> <span class="classifier">tuple</span></dt>
<dd>Current <cite>Minuit</cite> parameter values</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="kafe.iminuit_wrapper.IMinuit.get_profile">
<code class="descname">get_profile</code><span class="sig-paren">(</span><em>parameter</em>, <em>n_points=21</em><span class="sig-paren">)</span><a class="headerlink" href="#kafe.iminuit_wrapper.IMinuit.get_profile" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a list of points (2-tuples) the profile
the <img class="math" src="_images/math/8bd0685e3bf9101859d24cf0e851651f182364c9.png" alt="\chi^2"/>  of the iminuit fit.</p>
<dl class="docutils">
<dt><strong>parid</strong> <span class="classifier-delimiter">:</span> <span class="classifier">int</span></dt>
<dd>ID of the parameter to be displayed on the <cite>x</cite>-axis.</dd>
<dt><em>n_points</em> <span class="classifier-delimiter">:</span> <span class="classifier">int (optional)</span></dt>
<dd>number of points used for profile. Default is 21.</dd>
<dt><em>returns</em> <span class="classifier-delimiter">:</span> <span class="classifier">two arrays, par. values and corresp. <img class="math" src="_images/math/8bd0685e3bf9101859d24cf0e851651f182364c9.png" alt="\chi^2"/></span></dt>
<dd>containing <code class="docutils literal"><span class="pre">n_points</span></code> sampled profile points.</dd>
</dl>
</dd></dl>

<dl class="attribute">
<dt id="kafe.iminuit_wrapper.IMinuit.max_iterations">
<code class="descname">max_iterations</code><em class="property"> = None</em><a class="headerlink" href="#kafe.iminuit_wrapper.IMinuit.max_iterations" title="Permalink to this definition">¶</a></dt>
<dd><p>maximum number of iterations until <code class="docutils literal"><span class="pre">iminuit</span></code> gives up</p>
</dd></dl>

<dl class="method">
<dt id="kafe.iminuit_wrapper.IMinuit.minimize">
<code class="descname">minimize</code><span class="sig-paren">(</span><em>final_fit=True</em>, <em>log_print_level=2</em><span class="sig-paren">)</span><a class="headerlink" href="#kafe.iminuit_wrapper.IMinuit.minimize" title="Permalink to this definition">¶</a></dt>
<dd><p>Do the minimization. This calls <cite>Minuit</cite>&#8216;s algorithms <code class="docutils literal"><span class="pre">MIGRAD</span></code>
for minimization and, if <cite>final_fit</cite> is <cite>True</cite>, also <code class="docutils literal"><span class="pre">HESSE</span></code>
for computing/checking the parameter error matrix.</p>
</dd></dl>

<dl class="method">
<dt id="kafe.iminuit_wrapper.IMinuit.minos_errors">
<code class="descname">minos_errors</code><span class="sig-paren">(</span><em>log_print_level=1</em><span class="sig-paren">)</span><a class="headerlink" href="#kafe.iminuit_wrapper.IMinuit.minos_errors" title="Permalink to this definition">¶</a></dt>
<dd><p>Get (asymmetric) parameter uncertainties from MINOS
algorithm. This calls <cite>Minuit</cite>&#8216;s algorithms <code class="docutils literal"><span class="pre">MINOS</span></code>,
which determines parameter uncertainties using profiling
of the chi2 function.</p>
<dl class="docutils">
<dt>returns <span class="classifier-delimiter">:</span> <span class="classifier">tuple</span></dt>
<dd>A tuple of (err+, err-, parabolic error, global correlation)</dd>
</dl>
</dd></dl>

<dl class="attribute">
<dt id="kafe.iminuit_wrapper.IMinuit.name">
<code class="descname">name</code><em class="property"> = None</em><a class="headerlink" href="#kafe.iminuit_wrapper.IMinuit.name" title="Permalink to this definition">¶</a></dt>
<dd><p>the name of this minimizer type</p>
</dd></dl>

<dl class="attribute">
<dt id="kafe.iminuit_wrapper.IMinuit.number_of_parameters">
<code class="descname">number_of_parameters</code><em class="property"> = None</em><a class="headerlink" href="#kafe.iminuit_wrapper.IMinuit.number_of_parameters" title="Permalink to this definition">¶</a></dt>
<dd><p>number of parameters to minimize for</p>
</dd></dl>

<dl class="method">
<dt id="kafe.iminuit_wrapper.IMinuit.release_parameter">
<code class="descname">release_parameter</code><span class="sig-paren">(</span><em>parameter</em><span class="sig-paren">)</span><a class="headerlink" href="#kafe.iminuit_wrapper.IMinuit.release_parameter" title="Permalink to this definition">¶</a></dt>
<dd><p>Release parameter &lt;<cite>parameter</cite>&gt;.</p>
<dl class="docutils">
<dt><strong>parameter</strong> <span class="classifier-delimiter">:</span> <span class="classifier">string</span></dt>
<dd>Name of the parameter to release.</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="kafe.iminuit_wrapper.IMinuit.reset">
<code class="descname">reset</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#kafe.iminuit_wrapper.IMinuit.reset" title="Permalink to this definition">¶</a></dt>
<dd><p>Resets iminuit by re-creating the minimizer.</p>
</dd></dl>

<dl class="method">
<dt id="kafe.iminuit_wrapper.IMinuit.set_err">
<code class="descname">set_err</code><span class="sig-paren">(</span><em>up_value=1.0</em><span class="sig-paren">)</span><a class="headerlink" href="#kafe.iminuit_wrapper.IMinuit.set_err" title="Permalink to this definition">¶</a></dt>
<dd><p>Sets the <code class="docutils literal"><span class="pre">UP</span></code> value for Minuit.</p>
<dl class="docutils">
<dt><em>up_value</em> <span class="classifier-delimiter">:</span> <span class="classifier">float (optional, default: 1.0)</span></dt>
<dd>This is the value by which <cite>FCN</cite> is expected to change.</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="kafe.iminuit_wrapper.IMinuit.set_parameter_errors">
<code class="descname">set_parameter_errors</code><span class="sig-paren">(</span><em>parameter_errors=None</em>, <em>update_iminuit=True</em><span class="sig-paren">)</span><a class="headerlink" href="#kafe.iminuit_wrapper.IMinuit.set_parameter_errors" title="Permalink to this definition">¶</a></dt>
<dd><p>Sets the fit parameter errors. If parameter_values=`None`, sets the
error to 10% of the parameter value.</p>
</dd></dl>

<dl class="method">
<dt id="kafe.iminuit_wrapper.IMinuit.set_parameter_names">
<code class="descname">set_parameter_names</code><span class="sig-paren">(</span><em>parameter_names</em>, <em>update_iminuit=True</em><span class="sig-paren">)</span><a class="headerlink" href="#kafe.iminuit_wrapper.IMinuit.set_parameter_names" title="Permalink to this definition">¶</a></dt>
<dd><p>Sets the fit parameter names.</p>
</dd></dl>

<dl class="method">
<dt id="kafe.iminuit_wrapper.IMinuit.set_parameter_values">
<code class="descname">set_parameter_values</code><span class="sig-paren">(</span><em>parameter_values</em>, <em>update_iminuit=True</em><span class="sig-paren">)</span><a class="headerlink" href="#kafe.iminuit_wrapper.IMinuit.set_parameter_values" title="Permalink to this definition">¶</a></dt>
<dd><dl class="docutils">
<dt>Sets the fit parameters. If parameter_values=`None`, tries to infer</dt>
<dd>defaults from the function_to_minimize.</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="kafe.iminuit_wrapper.IMinuit.set_print_level">
<code class="descname">set_print_level</code><span class="sig-paren">(</span><em>print_level=1</em><span class="sig-paren">)</span><a class="headerlink" href="#kafe.iminuit_wrapper.IMinuit.set_print_level" title="Permalink to this definition">¶</a></dt>
<dd><p>Sets the print level for Minuit.</p>
<dl class="docutils">
<dt><em>print_level</em> <span class="classifier-delimiter">:</span> <span class="classifier">int (optional, default: 1 (frugal output))</span></dt>
<dd>Tells <code class="docutils literal"><span class="pre">iminuit</span></code> how much output to generate. The higher this
value, the more output it generates.</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="kafe.iminuit_wrapper.IMinuit.set_strategy">
<code class="descname">set_strategy</code><span class="sig-paren">(</span><em>strategy_id=1</em><span class="sig-paren">)</span><a class="headerlink" href="#kafe.iminuit_wrapper.IMinuit.set_strategy" title="Permalink to this definition">¶</a></dt>
<dd><p>Sets the strategy Minuit.</p>
<dl class="docutils">
<dt><em>strategy_id</em> <span class="classifier-delimiter">:</span> <span class="classifier">int (optional, default: 1 (optimized))</span></dt>
<dd>Tells <code class="docutils literal"><span class="pre">iminuit</span></code> to use a certain strategy. Refer to <code class="docutils literal"><span class="pre">iminuit</span></code>&#8216;s
documentation for available strategies.</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="kafe.iminuit_wrapper.IMinuit.set_tolerance">
<code class="descname">set_tolerance</code><span class="sig-paren">(</span><em>tol</em><span class="sig-paren">)</span><a class="headerlink" href="#kafe.iminuit_wrapper.IMinuit.set_tolerance" title="Permalink to this definition">¶</a></dt>
<dd><p>Sets the tolerance value for Minuit.</p>
<dl class="docutils">
<dt><strong>tol</strong> <span class="classifier-delimiter">:</span> <span class="classifier">float</span></dt>
<dd>The tolerance</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="kafe.iminuit_wrapper.IMinuit.update_parameter_data">
<code class="descname">update_parameter_data</code><span class="sig-paren">(</span><em>show_warnings=False</em><span class="sig-paren">)</span><a class="headerlink" href="#kafe.iminuit_wrapper.IMinuit.update_parameter_data" title="Permalink to this definition">¶</a></dt>
<dd><p>(Re-)Sets the parameter names, values and step size in iminuit.</p>
</dd></dl>

</dd></dl>

<dl class="data">
<dt id="kafe.iminuit_wrapper.P_DETAIL_LEVEL">
<code class="descclassname">kafe.iminuit_wrapper.</code><code class="descname">P_DETAIL_LEVEL</code><em class="property"> = 1</em><a class="headerlink" href="#kafe.iminuit_wrapper.P_DETAIL_LEVEL" title="Permalink to this definition">¶</a></dt>
<dd><p>default level of detail for iminuit&#8217;s output
(typical range: -1 to 3, default: 1)</p>
</dd></dl>

</div>
</div>
<div class="section" id="kafe-configuration">
<h2><em>kafe</em> configuration<a class="headerlink" href="#kafe-configuration" title="Permalink to this headline">¶</a></h2>
<div class="section" id="module-kafe.config">
<span id="kafe-configuration-kafe-config"></span><h3><em>kafe</em> configuration (<a class="reference internal" href="#module-kafe.config" title="kafe.config"><code class="xref py py-mod docutils literal"><span class="pre">kafe.config</span></code></a>)<a class="headerlink" href="#module-kafe.config" title="Permalink to this headline">¶</a></h3>
<span class="target" id="module-config"></span><dl class="function">
<dt id="kafe.config.create_config_file">
<code class="descclassname">kafe.config.</code><code class="descname">create_config_file</code><span class="sig-paren">(</span><em>config_type</em>, <em>force=False</em><span class="sig-paren">)</span><a class="headerlink" href="#kafe.config.create_config_file" title="Permalink to this definition">¶</a></dt>
<dd><p>Create a kafe config file.</p>
<dl class="docutils">
<dt><strong>config_type</strong> <span class="classifier-delimiter">:</span> <span class="classifier">&#8216;user&#8217; or &#8216;local&#8217;</span></dt>
<dd>Create a &#8216;user&#8217; config file in &#8216;~/.config/kafe&#8217; or a
&#8216;local&#8217; one in the current directory.</dd>
<dt><em>force</em> <span class="classifier-delimiter">:</span> <span class="classifier">boolean (optional)</span></dt>
<dd>If true, overwrites existing files.</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="kafe.config.log_file">
<code class="descclassname">kafe.config.</code><code class="descname">log_file</code><span class="sig-paren">(</span><em>file_relative_path</em><span class="sig-paren">)</span><a class="headerlink" href="#kafe.config.log_file" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns correct location for placing log files.</p>
</dd></dl>

</div>
</div>
<div class="section" id="modules-with-helper-tools">
<h2>Modules with helper tools<a class="headerlink" href="#modules-with-helper-tools" title="Permalink to this headline">¶</a></h2>
<div class="section" id="module-kafe.dataset_tools">
<span id="for-building-datasets-kafe-dataset-tools"></span><h3>For building datasets (<a class="reference internal" href="#module-kafe.dataset_tools" title="kafe.dataset_tools"><code class="xref py py-mod docutils literal"><span class="pre">kafe.dataset_tools</span></code></a>)<a class="headerlink" href="#module-kafe.dataset_tools" title="Permalink to this headline">¶</a></h3>
<span class="target" id="module-dataset_tools"></span><dl class="function">
<dt id="kafe.dataset_tools.build_dataset">
<code class="descclassname">kafe.dataset_tools.</code><code class="descname">build_dataset</code><span class="sig-paren">(</span><em>xdata</em>, <em>ydata</em>, <em>cov_mats=None</em>, <em>xabserr=0.0</em>, <em>xrelerr=0.0</em>, <em>xabscor=0.0</em>, <em>xrelcor=0.0</em>, <em>yabserr=0.0</em>, <em>yrelerr=0.0</em>, <em>yabscor=0.0</em>, <em>yrelcor=0.0</em>, <em>title=None</em>, <em>axis_labels=None</em>, <em>axis_units=None</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#kafe.dataset_tools.build_dataset" title="Permalink to this definition">¶</a></dt>
<dd><p>This helper function creates a <cite>Dataset</cite> from a series of keyword
arguments.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>xdata</strong> (list/tuple/<cite>np.array</cite> of floats) &#8211; This keyword argument is mandatory and should be an iterable
containing <em>x</em>-axis the measurement data.</li>
<li><strong>ydata</strong> (list/tuple/<cite>np.array</cite> of floats) &#8211; This keyword argument is mandatory and should be an iterable
containing <em>y</em>-axis the measurement data.</li>
<li><strong>cov_mats</strong> (<code class="docutils literal"><span class="pre">None</span></code> or 2-tuple, optional) &#8211; <p>This argument defaults to <code class="docutils literal"><span class="pre">None</span></code>, which means no covariance matrices
are used. If covariance matrices are needed, a tuple with two entries
(the first for <cite>x</cite> covariance matrices, the second for <cite>y</cite>) must be
passed.</p>
<p>Each element of this tuple may be either <code class="docutils literal"><span class="pre">None</span></code> or a NumPy matrix
object containing a covariance matrix for the respective axis.</p>
</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">Keyword Arguments:</th></tr>
<tr class="field-even field"><td>&nbsp;</td><td class="field-body"><ul class="first">
<li><p class="first"><strong>error specification keywords</strong> (<em>iterable or numeric (see below)</em>) &#8211;
In addition to covariance matrices, errors can be specified for each
axis (<em>x</em> or <em>y</em>) according to a simplified error model.</p>
<p>In this respect, a valid keyword is composed of an axis, an error
relativity specification (<em>abs</em> or <em>rel</em>) and error correlation type
(<em>err</em> or <em>cor</em>). The errors are then set as follows:</p>
<blockquote>
<div><ol class="arabic">
<li><dl class="first docutils">
<dt>For totally uncorrelated errors (<em>err</em>):</dt>
<dd><ul class="first last simple">
<li>if keyword argument is iterable, the error list is set to that</li>
<li>if keyword argument is a number, an error list with identical entries is generated</li>
</ul>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>For fully correlated errors (<em>cor</em>):</dt>
<dd><ul class="first last simple">
<li>keyword argument <em>must</em> be a single number. The global correlated error for the axis is then set to that.</li>
</ul>
</dd>
</dl>
</li>
</ol>
</div></blockquote>
<p>So, for example:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">my_dataset</span> <span class="o">=</span> <span class="n">build_dataset</span><span class="p">(</span><span class="o">...</span><span class="p">,</span> <span class="n">yabserr</span><span class="o">=</span><span class="mf">0.3</span><span class="p">,</span> <span class="n">yrelcor</span><span class="o">=</span><span class="mf">0.1</span><span class="p">)</span>
</pre></div>
</div>
<p>creates a Dataset with an uncorrelated error of 0.3 for each <cite>y</cite>
coordinate and a fully correlated (systematic) error of <cite>y</cite> of 0.1.</p>
</li>
<li><p class="first"><strong>title</strong> (<em>string, optional</em>) &#8211;
The title of the <cite>Dataset</cite>.</p>
</li>
<li><p class="first"><strong>axis_labels</strong> (<em>2-tuple of strings, optional</em>) &#8211;
a 2-tuple containing the axis labels for the <cite>Dataset</cite>. This is
relevant when plotting <cite>Fits</cite> of the <cite>Dataset</cite>, but is ignored when
plotting more than one <cite>Fit</cite> in the same <cite>Plot</cite>.</p>
</li>
<li><p class="first"><strong>axis_units</strong> (<em>2-tuple of strings, optional</em>) &#8211;
a 2-tuple containing the axis units for the <cite>Dataset</cite>. This is
relevant when plotting <cite>Fits</cite> of the <cite>Dataset</cite>, but is ignored when
plotting more than one <cite>Fit</cite> in the same <cite>Plot</cite>.</p>
</li>
</ul>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><cite>Dataset</cite> object constructed from data and error information</p>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last"><a class="reference internal" href="#kafe.dataset.Dataset" title="kafe.dataset.Dataset"><code class="xref py py-class docutils literal"><span class="pre">Dataset</span></code></a></p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</div>
<div class="section" id="module-kafe.file_tools">
<span id="for-parsing-files-kafe-file-tools"></span><h3>For parsing files (<a class="reference internal" href="#module-kafe.file_tools" title="kafe.file_tools"><code class="xref py py-mod docutils literal"><span class="pre">kafe.file_tools</span></code></a>)<a class="headerlink" href="#module-kafe.file_tools" title="Permalink to this headline">¶</a></h3>
<span class="target" id="module-file_tools"></span><dl class="function">
<dt id="kafe.file_tools.buildDataset_fromFile">
<code class="descclassname">kafe.file_tools.</code><code class="descname">buildDataset_fromFile</code><span class="sig-paren">(</span><em>file_to_parse</em><span class="sig-paren">)</span><a class="headerlink" href="#kafe.file_tools.buildDataset_fromFile" title="Permalink to this definition">¶</a></dt>
<dd><p>Build a kafe <a class="reference internal" href="#kafe.dataset.Dataset" title="kafe.dataset.Dataset"><code class="xref py py-class docutils literal"><span class="pre">Dataset</span></code></a> object from input file
with key words and file format defined in
<a class="reference internal" href="#kafe.file_tools.parse_general_inputfile" title="kafe.file_tools.parse_general_inputfile"><code class="xref py py-func docutils literal"><span class="pre">parse_general_inputfile()</span></code></a></p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>file_to_parse</strong> (<em>file-like object or string containing a file path</em>) &#8211; The file to parse.</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">a <a class="reference internal" href="#kafe.dataset.Dataset" title="kafe.dataset.Dataset"><code class="xref py py-class docutils literal"><span class="pre">Dataset</span></code></a> object
constructed with the help of the method
<code class="xref py py-func docutils literal"><span class="pre">kafe.dataset.Dataset.build_dataset()</span></code></td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body">py:class:<cite>~kafe.dataset.Dataset</cite></td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="kafe.file_tools.buildFit_fromFile">
<code class="descclassname">kafe.file_tools.</code><code class="descname">buildFit_fromFile</code><span class="sig-paren">(</span><em>file_to_parse</em><span class="sig-paren">)</span><a class="headerlink" href="#kafe.file_tools.buildFit_fromFile" title="Permalink to this definition">¶</a></dt>
<dd><p>Build a kafe <a class="reference internal" href="#kafe.fit.Fit" title="kafe.fit.Fit"><code class="xref py py-class docutils literal"><span class="pre">Fit</span></code></a> object from input file with
keywords and file format defined in
<a class="reference internal" href="#kafe.file_tools.parse_general_inputfile" title="kafe.file_tools.parse_general_inputfile"><code class="xref py py-func docutils literal"><span class="pre">parse_general_inputfile()</span></code></a></p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>file_to_parse</strong> (<em>file-like object or string containing a file path</em>) &#8211; The file to parse.</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">a <a class="reference internal" href="#kafe.fit.Fit" title="kafe.fit.Fit"><code class="xref py py-class docutils literal"><span class="pre">Fit</span></code></a> object
constructed with the help of the methods
<code class="xref py py-func docutils literal"><span class="pre">build_dataset()</span></code> and
<code class="xref py py-func docutils literal"><span class="pre">build_fit()</span></code></td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body">py:class:<cite>~kafe.fit.Fit</cite></td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="kafe.file_tools.parse_column_data">
<code class="descclassname">kafe.file_tools.</code><code class="descname">parse_column_data</code><span class="sig-paren">(</span><em>file_to_parse, field_order='x,y', delimiter=' ', cov_mat_files=None, title='Untitled Dataset', basename=None, axis_labels=['x', 'y'], axis_units=['', '']</em><span class="sig-paren">)</span><a class="headerlink" href="#kafe.file_tools.parse_column_data" title="Permalink to this definition">¶</a></dt>
<dd><p>Parses a file which contains measurement data in a one-measurement-per-row
format. The field (column) order can be specified. It defaults to
<code class="docutils literal"><span class="pre">&quot;x,y&quot;</span></code>.
Valid field names are <cite>x</cite>, <cite>y</cite>, <cite>xabserr</cite>, <cite>yabserr</cite>, <cite>xrelerr</cite>,
<cite>yrelerr</cite>. Another valid field name is <cite>ignore</cite> which can be used to skip
a field.</p>
<p>A certain type of field can appear several times. If this is the case, all
specified errors are added in quadrature:</p>
<div class="math">
<p><img src="_images/math/87aa34facdbe3ec00a4650d9e054afbba9b98b14.png" alt="\sigma_{\text{tot}} = \sqrt{{\sigma_1}^2+{\sigma_2}^2+\dots}"/></p>
</div><p>Every valid measurement data file <em>must</em> have an <cite>x</cite> and a <cite>y</cite> field.</p>
<p>For more complex error models, errors and correlations may be specified as
covariance matrices. If this is desired, then any number of covariance
matrices (stored in separate files) may be specified for an axis by
using the <cite>cov_mat_files</cite> argument.</p>
<p>Additionally, a delimiter can be specified. If this is a whitespace
character or omitted, any sequence of whitespace characters is assumed to
separate the data.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>file_to_parse</strong> (<em>file-like object or string containing a file path</em>) &#8211; The file to parse.</li>
<li><strong>field_order</strong> (<em>string, optional</em>) &#8211; A string of comma-separated field names giving the order of the columns
in the file. Defaults to <code class="docutils literal"><span class="pre">'x,y'</span></code>.</li>
<li><strong>delimiter</strong> (<em>string, optional</em>) &#8211; The field delimiter used in the file. Defaults to any whitespace.</li>
<li><strong>cov_mat_files</strong> (<em>several</em> (see below), optional) &#8211; <p>This argument defaults to <code class="docutils literal"><span class="pre">None</span></code>, which means no covariance matrices
are used. If covariance matrices are needed, a tuple with two entries
(the first for <cite>x</cite> covariance matrices, the second for <cite>y</cite>) must be
passed.</p>
<p>Each element of this tuple may be either <code class="docutils literal"><span class="pre">None</span></code>, a file or file-like
object, or an iterable containing files and file-like objects. Each
file should contain a covariance matrix for the respective axis.</p>
<p>When creating the <code class="xref py py-obj docutils literal"><span class="pre">Dataset</span></code>, all given matrices are summed over.</p>
</li>
<li><strong>title</strong> (<em>string, optional</em>) &#8211; The title of the <code class="xref py py-obj docutils literal"><span class="pre">Dataset</span></code>.</li>
<li><strong>basename</strong> (string or <code class="docutils literal"><span class="pre">None</span></code>, optional) &#8211; A basename for the <code class="xref py py-obj docutils literal"><span class="pre">Dataset</span></code>. All output files related to this dataset
will use this as a basename. If this is <code class="docutils literal"><span class="pre">None</span></code> (default), the
basename will be inferred from the filename.</li>
<li><strong>axis_labels</strong> (<em>2-tuple of strings, optional</em>) &#8211; a 2-tuple containing the axis labels for the <code class="xref py py-obj docutils literal"><span class="pre">Dataset</span></code>. This is
relevant when plotting <code class="xref py py-obj docutils literal"><span class="pre">Fits</span></code> of the <code class="xref py py-obj docutils literal"><span class="pre">Dataset</span></code>, but is ignored when
plotting more than one <code class="xref py py-obj docutils literal"><span class="pre">Fit</span></code> in the same <code class="xref py py-obj docutils literal"><span class="pre">Plot</span></code>.</li>
<li><strong>axis_units</strong> (<em>2-tuple of strings, optional</em>) &#8211; a 2-tuple containing the axis units for the <code class="xref py py-obj docutils literal"><span class="pre">Dataset</span></code>. This is
relevant when plotting <code class="xref py py-obj docutils literal"><span class="pre">Fits</span></code> of the <code class="xref py py-obj docutils literal"><span class="pre">Dataset</span></code>, but is ignored when
plotting more than one <code class="xref py py-obj docutils literal"><span class="pre">Fit</span></code> in the same <code class="xref py py-obj docutils literal"><span class="pre">Plot</span></code>.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">A <cite>Dataset</cite> built from the parsed file.</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last"><a class="reference internal" href="#kafe.dataset.Dataset" title="kafe.dataset.Dataset"><code class="xref py py-class docutils literal"><span class="pre">Dataset</span></code></a></p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="kafe.file_tools.parse_general_inputfile">
<code class="descclassname">kafe.file_tools.</code><code class="descname">parse_general_inputfile</code><span class="sig-paren">(</span><em>file_to_parse</em><span class="sig-paren">)</span><a class="headerlink" href="#kafe.file_tools.parse_general_inputfile" title="Permalink to this definition">¶</a></dt>
<dd><p>This function can be used to specify <cite>kafe</cite>
<a class="reference internal" href="#kafe.dataset.Dataset" title="kafe.dataset.Dataset"><code class="xref py py-class docutils literal"><span class="pre">Dataset</span></code></a> or <a class="reference internal" href="#kafe.fit.Fit" title="kafe.fit.Fit"><code class="xref py py-class docutils literal"><span class="pre">Fit</span></code></a> objects
in a single input file, thus requiring minimal Python code. Keywords as
specified in a dictionary <code class="docutils literal"><span class="pre">tokens</span></code> specify all objects and parameters
needed by the functions <a class="reference internal" href="#kafe.dataset_tools.build_dataset" title="kafe.dataset_tools.build_dataset"><code class="xref py py-func docutils literal"><span class="pre">build_dataset()</span></code></a> in
module <a class="reference internal" href="#module-kafe.dataset" title="kafe.dataset"><code class="xref py py-mod docutils literal"><span class="pre">dataset</span></code></a> and <a class="reference internal" href="#kafe.fit.build_fit" title="kafe.fit.build_fit"><code class="xref py py-func docutils literal"><span class="pre">build_fit()</span></code></a> in
module <a class="reference internal" href="#module-kafe.fit" title="kafe.fit"><code class="xref py py-mod docutils literal"><span class="pre">fit</span></code></a>.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>file_to_parse</strong> (<em>file-like object or string containing a file path</em>) &#8211; The file to parse.</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">keyword lists to build a kafe <a class="reference internal" href="#kafe.dataset.Dataset" title="kafe.dataset.Dataset"><code class="xref py py-class docutils literal"><span class="pre">Dataset</span></code></a> or
<a class="reference internal" href="#kafe.fit.Fit" title="kafe.fit.Fit"><code class="xref py py-class docutils literal"><span class="pre">Fit</span></code></a> object with the helper functions
<cite>build_dataset</cite> or <cite>build_fit</cite></td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body">(dataset_kwargs, fit_kwargs)</td>
</tr>
</tbody>
</table>
<p><strong>Input file format</strong></p>
<p>The interpretation of the input data is driven by <em>keywords</em>. All data
following a key must be of the same kind. A block of data ends when a
new key is specified. Comments can be introduced by <code class="docutils literal"><span class="pre">#</span></code>.</p>
<p>Some keys only expect a single float or string-type value, given
on the same line, separated by a space (<code class="docutils literal"><span class="pre">'</span> <span class="pre">'</span></code>):</p>
<div class="highlight-python"><div class="highlight"><pre>&lt;key&gt; &lt;value&gt;
</pre></div>
</div>
<p>Other keys require multiple lines of input. For instance, the keys
<code class="docutils literal"><span class="pre">*xData</span></code> and <code class="docutils literal"><span class="pre">*yData</span></code> expect the following lines to be a table where
the first column corresponds to the data values and the second column
corresponds to the uncertainties:</p>
<div class="highlight-python"><div class="highlight"><pre>&lt;key&gt;
&lt;value1&gt;  &lt;uncertainty1&gt;
&lt;value2&gt;  &lt;uncertainty2&gt;
...
&lt;valueN&gt;  &lt;uncertaintyN&gt;
</pre></div>
</div>
<p>The column separator is space (<code class="docutils literal"><span class="pre">'</span> <span class="pre">'</span></code>). For more details about input
data specification, see <a class="reference internal" href="#specifying-input-data"><span>below</span></a>.</p>
<p><strong>Specifying metadata</strong></p>
<blockquote>
<div><table border="1" class="docutils">
<colgroup>
<col width="38%" />
<col width="62%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head"><strong>Key</strong></th>
<th class="head"><strong>Description</strong></th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><code class="docutils literal"><span class="pre">*TITLE</span></code></td>
<td>name of the dataset</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal"><span class="pre">*BASENAME</span></code></td>
<td>name from which output
file names is derived</td>
</tr>
<tr class="row-even"><td><code class="docutils literal"><span class="pre">*FITLABEL</span></code></td>
<td>fit label</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal"><span class="pre">*xLabel</span></code></td>
<td>x axis label</td>
</tr>
<tr class="row-even"><td><code class="docutils literal"><span class="pre">*xUnit</span></code></td>
<td>x axis unit</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal"><span class="pre">*yLabel</span></code></td>
<td>y axis label</td>
</tr>
<tr class="row-even"><td><code class="docutils literal"><span class="pre">*yUnit</span></code></td>
<td>y axis unit</td>
</tr>
</tbody>
</table>
</div></blockquote>
<p>The fit label may be set using the key <code class="docutils literal"><span class="pre">*FITLABEL</span></code>, followed by the
desired name for the fit.</p>
<p id="specifying-input-data"><strong>Specifying input data</strong></p>
<p>Input data are given as a list of values (one datapoint per row). For a
simple uncertainty model (no correlations), the keys <code class="docutils literal"><span class="pre">*xData</span></code> and
<code class="docutils literal"><span class="pre">*yData</span></code> are used. The second column indicates the uncertainty of the
measurement:</p>
<div class="highlight-python"><div class="highlight"><pre>*xData
1.2
3.4
6.9

*yData
2.1       0.2
3.9       0.3
8.2       0.5
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Uncertainties always have to be specified for <code class="docutils literal"><span class="pre">*yData</span></code>. For
<code class="docutils literal"><span class="pre">*xData</span></code>, they are optional.</p>
</div>
<p>For input data with correlated uncertainties, the alternative keys
<code class="docutils literal"><span class="pre">*xData_COR</span></code> and <code class="docutils literal"><span class="pre">*yData_COR</span></code> are provided. For these, additional
columns must be given. The second and third column indicate the
uncorrelated and correlated uncertainties, respectively. The subequent
columns contain the correlation matrix (a lower triangular matrix
containing the correlation coefficients):</p>
<div class="highlight-python"><div class="highlight"><pre>*yData_COR
# value  indep.uncert.  syst.uncert.  elements of corr. matrix.
2.1      0.2            0.1
3.9      0.3            0.2           1.0
8.2      0.5            0.3           1.0        1.0
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Only elements below the main diagonal of the correlation matrix have
to be specified. Since the matrix is symmetric by construction, the
elements above the main diagonal can be inferred from those below.
Additionally, since the diagonal elements of a correlation matrix are
always equal to 1 by definition, they are also omitted.</p>
</div>
<p>As an alternative to specifying the correlation matrix, the covariance
matrix may be specified directly. There are two ways to do this:</p>
<p>The keys <code class="docutils literal"><span class="pre">*xData_SCOV</span></code> and <code class="docutils literal"><span class="pre">*yData_SCOV</span></code> allow specifying the
covariance matrix by providing a correlated uncertainty (third column)
and the square root of the elements below the main diagonal. This is
useful if the pairwise covariance of two measurements cannot be
expressed using the correlation coefficient and needs to be provided
explicitly.</p>
<p>In the example below, there is a correlation between the first two and
the last two measurements, which is estimated under the assumption that
the smaller of the two uncertainties represents a common error:</p>
<div class="highlight-python"><div class="highlight"><pre>*yData_SCOV
# mH      err    syst   sqrt(cov)
124.51   0.52    0.06
125.60   0.40    0.20   0.06
125.98   0.42    0.28   0.   0.
124.70   0.31    0.15   0.   0.  0.15
</pre></div>
</div>
<p>A second possibility is specifying the full covariance matrix directly.
This is achieved using the <code class="docutils literal"><span class="pre">*xData_COV</span></code> and <code class="docutils literal"><span class="pre">*yData_COV</span></code> keywords.
In this case, only the data values and the uncorrelated uncertainties
(first and second columns, respectively) must be specified in addition
to the covariance matrix (all other columns). All entries starting with
the third column are assumed to be covariance matrix elements. The
matrix is symmetric, so elements above the diagonal are omitted. Note
that the diagonal must be specified and corresponds to the squares of
the correlated errors:</p>
<div class="highlight-python"><div class="highlight"><pre>*yData_COV
# mH      err    cov_ij
124.51   0.52    0.0036
125.60   0.40    0.0036  0.04
125.98   0.42    0.      0.    0.0784
124.70   0.31    0.      0.    0.0225  0.0225
</pre></div>
</div>
<p><strong>Specifying additional uncertainties</strong></p>
<p>In addition to the uncertainties already specified in the
<a class="reference internal" href="#specifying-input-data"><span>input data table</span></a>, other systematic
uncertainties may be provided. These are assumed be fully correlated and
common to all data points. This can be achieved by using the following
keys:</p>
<blockquote>
<div><table border="1" class="docutils">
<colgroup>
<col width="23%" />
<col width="77%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head"><strong>Key</strong></th>
<th class="head"><strong>Description</strong></th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><code class="docutils literal"><span class="pre">*xAbsCor</span></code></td>
<td>common fully correlated x-uncertainty (absolute)</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal"><span class="pre">*yAbsCor</span></code></td>
<td>common fully correlated y-uncertainty (absolute)</td>
</tr>
<tr class="row-even"><td><code class="docutils literal"><span class="pre">*xRelCor</span></code></td>
<td>common fully correlated x-uncertainty (relative)</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal"><span class="pre">*yRelCor</span></code></td>
<td>common fully correlated y-uncertainty (relative)</td>
</tr>
</tbody>
</table>
</div></blockquote>
<p><strong>Specifying a fit function</strong></p>
<p>To specify the fit function, the key <code class="docutils literal"><span class="pre">*FitFunction</span></code> is provided. This
key should be followed by <em>Python</em> code:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="k">def</span> <span class="nf">fitf</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="o">...</span><span class="p">):</span>
    <span class="o">...</span>
    <span class="k">return</span> <span class="o">...</span>
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p>Only one Python function may be defined after the <code class="docutils literal"><span class="pre">*FitFunction</span></code>
keyword. Also, any function name can be used instead of <code class="docutils literal"><span class="pre">fitf</span></code>.</p>
<p class="last">Additionally, the decorators <code class="docutils literal"><span class="pre">&#64;ASCII</span></code>, <code class="docutils literal"><span class="pre">&#64;LaTeX</span></code> and
<code class="docutils literal"><span class="pre">&#64;FitFunction</span></code> are supported (see
<a class="reference internal" href="#kafe.function_tools.ASCII" title="kafe.function_tools.ASCII"><code class="xref py py-class docutils literal"><span class="pre">ASCII</span></code></a>,
<a class="reference internal" href="#kafe.function_tools.LaTeX" title="kafe.function_tools.LaTeX"><code class="xref py py-class docutils literal"><span class="pre">LaTeX</span></code></a> and
<a class="reference internal" href="#kafe.function_tools.FitFunction" title="kafe.function_tools.FitFunction"><code class="xref py py-class docutils literal"><span class="pre">FitFunction</span></code></a>)</p>
</div>
<p><strong>Specifying initial values for parameters</strong></p>
<p>Initial values for fit parameters may be set using the keyword
<code class="docutils literal"><span class="pre">*InitialParameters</span></code>. This keyword expects to be followed by a table
with two columns containing floating-point values.</p>
<p>Each line in the table corresponds to one fit parameter, in the order
they are given in the fit function signature. The first column should
contain the initial value of the parameters and the second column the
&#8220;initial uncertainty&#8221;, which controls the initial variation range of
the parameter at the beginning of the fit:</p>
<div class="highlight-python"><div class="highlight"><pre>*InitialParameters
&lt;initial value par 1&gt;  &lt;initial uncert par 1&gt;
&lt;initial value par 2&gt;  &lt;initial uncert par 2&gt;
...
&lt;initial value par N&gt;  &lt;initial uncert par N&gt;
</pre></div>
</div>
<p><strong>Constraining parameters</strong></p>
<p>If there is any prior knowledge about model parameters&#8217; values on
uncertainties, these may be constrained during the fit.</p>
<p>During the fit, model parameters can be constrained within their
uncertainties if there is any prior knowledge about their values and
uncertainties.</p>
<p>This may be specified using the keyword <code class="docutils literal"><span class="pre">*ConstrainedParameters</span></code>, followed
by a table containing the parameter name, value and uncertainty for each parameter
to be constrained:</p>
<div class="highlight-python"><div class="highlight"><pre>&lt;parameter name&gt;  &lt;parameter value&gt;  &lt;parameter uncert.&gt;,
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">The parameter name must be the one specified in the fit function definition.</p>
</div>
<p><strong>Example</strong></p>
<p>Here is an example of an input file to calculate the average of four
partly correlated measurements (see <a class="reference internal" href="examples.html#example-8"><span>Example 8</span></a>):</p>
<div class="highlight-python"><div class="highlight"><pre>#  Meta data for plotting
*TITLE Higgs-mass measurements
*xLabel number of measurement
*yLabel $m_\mathrm{H}$
*yUnit GeV/$c^2$

#*xData  # commented out, as not needed for simple average

*yData_SCOV  # assume that minimum of syst. errors is a common error
# mH      err     syst as sqrt(cov)
124.51   0.52    0.06
125.60   0.40    0.20  0.06
125.98   0.42    0.28  0.   0.
124.70   0.31    0.15  0.   0.  0.15

*FitFunction  # Python code of fit function

#  kafe fit function decorators are supported
@ASCII(expression=&#39;av&#39;)
@LaTeX(name=&#39;f&#39;, parameter_names=(&#39;av&#39;), expression=&#39;av&#39;)
@FitFunction
def fitf(x, av=1.0): # fit an average
    return av

*FITLABEL Average

*InitialParameters
120. 1.
</pre></div>
</div>
</dd></dl>

</div>
<div class="section" id="module-kafe.function_tools">
<span id="for-specifying-and-decorating-fit-functions-kafe-function-tools"></span><h3>For specifying and decorating fit functions (<a class="reference internal" href="#module-kafe.function_tools" title="kafe.function_tools"><code class="xref py py-mod docutils literal"><span class="pre">kafe.function_tools</span></code></a>)<a class="headerlink" href="#module-kafe.function_tools" title="Permalink to this headline">¶</a></h3>
<span class="target" id="module-function_tools"></span><dl class="function">
<dt id="kafe.function_tools.ASCII">
<code class="descclassname">kafe.function_tools.</code><code class="descname">ASCII</code><span class="sig-paren">(</span><em>**kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#kafe.function_tools.ASCII" title="Permalink to this definition">¶</a></dt>
<dd><p>Optional decorator for fit functions. This overrides a FitFunction&#8217;s
plain-text (ASCII) attributes. The new values for these attributes must be
passed as keyword arguments to the decorator. Possible arguments:</p>
<dl class="docutils">
<dt><em>name</em> <span class="classifier-delimiter">:</span> <span class="classifier">string</span></dt>
<dd>Plain-text representation of the function name.</dd>
<dt><em>parameter_names</em> <span class="classifier-delimiter">:</span> <span class="classifier">list of strings</span></dt>
<dd>List of plain-text representations of the function&#8217;s arguments.
The length of this list must be equal to the function&#8217;s argument
number. The argument names should be in the same order as in the
function definition.</dd>
<dt><em>x_name</em> <span class="classifier-delimiter">:</span> <span class="classifier">string</span></dt>
<dd>Plain-text representation of the independent variable&#8217;s name.</dd>
<dt><em>expression</em> <span class="classifier-delimiter">:</span> <span class="classifier">string</span></dt>
<dd>Plain-text-formatted expression representing the
function&#8217;s formula.</dd>
</dl>
</dd></dl>

<dl class="class">
<dt id="kafe.function_tools.FitFunction">
<em class="property">class </em><code class="descclassname">kafe.function_tools.</code><code class="descname">FitFunction</code><span class="sig-paren">(</span><em>f</em><span class="sig-paren">)</span><a class="headerlink" href="#kafe.function_tools.FitFunction" title="Permalink to this definition">¶</a></dt>
<dd><p>Decorator class for fit functions. If a function definition is decorated
using this class, some information is collected about the function which
is relevant to the fitting process, such as the number of parameters,
their names and default values. Some details pertaining to display and
representation are also set, such as <img class="math" src="_images/math/a7232b593ed37730342f85e75263e83d0dd59863.png" alt="LaTeX"/> representations of
the parameter names and the function name. Other decorators can be applied
to a function object to specify things such as a <img class="math" src="_images/math/a7232b593ed37730342f85e75263e83d0dd59863.png" alt="LaTeX"/> or
plain-text expression for the fit function.</p>
<dl class="method">
<dt id="kafe.function_tools.FitFunction.derive_by_parameters">
<code class="descname">derive_by_parameters</code><span class="sig-paren">(</span><em>x_0</em>, <em>precision_spec</em>, <em>parameter_list</em><span class="sig-paren">)</span><a class="headerlink" href="#kafe.function_tools.FitFunction.derive_by_parameters" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the gradient of <cite>func</cite> with respect to its parameters, i.e.
with respect to every variable of <cite>func</cite> except the first one.</p>
<dl class="docutils">
<dt><strong>precision_spec</strong> <span class="classifier-delimiter">:</span> <span class="classifier"><code class="docutils literal"><span class="pre">float</span></code> or iterable of <code class="docutils literal"><span class="pre">floats</span></code></span></dt>
<dd>An array of floats indicating the initial point spacing for
numerically evaluating the derivative. Can be a single float
value to use the same spacing for every derivation.</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="kafe.function_tools.FitFunction.derive_by_x">
<code class="descname">derive_by_x</code><span class="sig-paren">(</span><em>x_0</em>, <em>precision_list</em>, <em>parameter_list</em><span class="sig-paren">)</span><a class="headerlink" href="#kafe.function_tools.FitFunction.derive_by_x" title="Permalink to this definition">¶</a></dt>
<dd><p>If <cite>x_0</cite> is iterable, gives the array of derivatives of a function
<img class="math" src="_images/math/6b51f95fd61efc238885d8d668bbe5bc8f4b1834.png" alt="f(x, par_1, par_2, \ldots)"/> around <img class="math" src="_images/math/f091a7fe75d07310623cb21e1bb1aa0b1506a4de.png" alt="x = x_i"/> at every
<img class="math" src="_images/math/33dfc32d00ebd5c5791c824010a155d9e5630b6f.png" alt="x_i"/> in <img class="math" src="_images/math/e9b59e204ab968c949258f84fdab201554bf2338.png" alt="\vec{x}"/>. If <cite>x_0</cite> is not iterable, gives the
derivative of a function <img class="math" src="_images/math/6b51f95fd61efc238885d8d668bbe5bc8f4b1834.png" alt="f(x, par_1, par_2, \ldots)"/> around
<img class="math" src="_images/math/f894cb33ee8a5501a37ff2ba8c4a474281075c8e.png" alt="x = \verb!x_0!"/>.</p>
</dd></dl>

<dl class="method">
<dt id="kafe.function_tools.FitFunction.evaluate">
<code class="descname">evaluate</code><span class="sig-paren">(</span><em>x_0</em>, <em>parameter_list</em><span class="sig-paren">)</span><a class="headerlink" href="#kafe.function_tools.FitFunction.evaluate" title="Permalink to this definition">¶</a></dt>
<dd><p>Evaluate the fit function at an x-value or at an array of
x-values for the parameter values in <cite>prarameter_list</cite>.</p>
<blockquote>
<div><p><strong>x_0</strong> float or array of floats</p>
<p><strong>parameter_list</strong> values of function parameters</p>
<p><strong>returns</strong> function value(s)</p>
</div></blockquote>
</dd></dl>

<dl class="attribute">
<dt id="kafe.function_tools.FitFunction.expression">
<code class="descname">expression</code><em class="property"> = None</em><a class="headerlink" href="#kafe.function_tools.FitFunction.expression" title="Permalink to this definition">¶</a></dt>
<dd><p>a math expression (string) representing the function&#8217;s result</p>
</dd></dl>

<dl class="method">
<dt id="kafe.function_tools.FitFunction.get_function_equation">
<code class="descname">get_function_equation</code><span class="sig-paren">(</span><em>equation_format='latex'</em>, <em>equation_type='full'</em>, <em>ensuremath=True</em><span class="sig-paren">)</span><a class="headerlink" href="#kafe.function_tools.FitFunction.get_function_equation" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a string representing the function equation. Supported formats
are <img class="math" src="_images/math/a7232b593ed37730342f85e75263e83d0dd59863.png" alt="LaTeX"/> and ASCII inline math. Note that <img class="math" src="_images/math/a7232b593ed37730342f85e75263e83d0dd59863.png" alt="LaTeX"/>
math is wrapped by default in an <code class="docutils literal"><span class="pre">\ensuremath{}</span></code> expression. If this
is not desired behaviour, the flag <code class="docutils literal"><span class="pre">ensuremath</span></code> can be set to
<code class="docutils literal"><span class="pre">False</span></code>.</p>
<dl class="docutils">
<dt><em>equation_format</em> <span class="classifier-delimiter">:</span> <span class="classifier">string (optional)</span></dt>
<dd>Can be either &#8220;latex&#8221; (default) or &#8220;ascii&#8221;.</dd>
<dt><em>equation_type</em> <span class="classifier-delimiter">:</span> <span class="classifier">string (optional)</span></dt>
<dd><p class="first">Can be either &#8220;full&#8221; (default), &#8220;short&#8221; or &#8220;name&#8221;. A &#8220;name&#8221;-type
equation returns a representation of the function name:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">f</span>
</pre></div>
</div>
<p>A &#8220;short&#8221;-type equation limits itself to the function name and
variables:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">f</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">par1</span><span class="p">,</span> <span class="n">par2</span><span class="p">)</span>
</pre></div>
</div>
<p>A &#8220;full&#8221;-type equation includes the expression which the function
calculates:</p>
<div class="last highlight-python"><div class="highlight"><pre><span class="n">f</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">par1</span><span class="p">,</span> <span class="n">par2</span><span class="p">)</span> <span class="o">=</span> <span class="n">par1</span> <span class="o">*</span> <span class="n">x</span> <span class="o">+</span> <span class="n">par2</span>
</pre></div>
</div>
</dd>
<dt><em>ensuremath</em> <span class="classifier-delimiter">:</span> <span class="classifier">boolean (optional)</span></dt>
<dd>If a <img class="math" src="_images/math/a7232b593ed37730342f85e75263e83d0dd59863.png" alt="LaTeX"/> math equation is requested, <code class="docutils literal"><span class="pre">True</span></code>
(default) will wrap the resulting expression in an
<code class="docutils literal"><span class="pre">\ensuremath{}</span></code> tag. Otherwise, no wrapping is done.</dd>
</dl>
</dd></dl>

<dl class="attribute">
<dt id="kafe.function_tools.FitFunction.latex_expression">
<code class="descname">latex_expression</code><em class="property"> = None</em><a class="headerlink" href="#kafe.function_tools.FitFunction.latex_expression" title="Permalink to this definition">¶</a></dt>
<dd><p>a <img class="math" src="_images/math/a7232b593ed37730342f85e75263e83d0dd59863.png" alt="LaTeX"/> math expression, the function&#8217;s result</p>
</dd></dl>

<dl class="attribute">
<dt id="kafe.function_tools.FitFunction.latex_name">
<code class="descname">latex_name</code><em class="property"> = None</em><a class="headerlink" href="#kafe.function_tools.FitFunction.latex_name" title="Permalink to this definition">¶</a></dt>
<dd><p>The function&#8217;s name in <img class="math" src="_images/math/a7232b593ed37730342f85e75263e83d0dd59863.png" alt="LaTeX"/></p>
</dd></dl>

<dl class="attribute">
<dt id="kafe.function_tools.FitFunction.latex_parameter_names">
<code class="descname">latex_parameter_names</code><em class="property"> = None</em><a class="headerlink" href="#kafe.function_tools.FitFunction.latex_parameter_names" title="Permalink to this definition">¶</a></dt>
<dd><p>A list of parameter names in <img class="math" src="_images/math/a7232b593ed37730342f85e75263e83d0dd59863.png" alt="LaTeX"/></p>
</dd></dl>

<dl class="attribute">
<dt id="kafe.function_tools.FitFunction.latex_x_name">
<code class="descname">latex_x_name</code><em class="property"> = None</em><a class="headerlink" href="#kafe.function_tools.FitFunction.latex_x_name" title="Permalink to this definition">¶</a></dt>
<dd><p>A <img class="math" src="_images/math/a7232b593ed37730342f85e75263e83d0dd59863.png" alt="LaTeX"/> symbol for the independent variable.</p>
</dd></dl>

<dl class="attribute">
<dt id="kafe.function_tools.FitFunction.name">
<code class="descname">name</code><em class="property"> = None</em><a class="headerlink" href="#kafe.function_tools.FitFunction.name" title="Permalink to this definition">¶</a></dt>
<dd><p>The name of the function</p>
</dd></dl>

<dl class="attribute">
<dt id="kafe.function_tools.FitFunction.number_of_parameters">
<code class="descname">number_of_parameters</code><em class="property"> = None</em><a class="headerlink" href="#kafe.function_tools.FitFunction.number_of_parameters" title="Permalink to this definition">¶</a></dt>
<dd><p>The number of parameters</p>
</dd></dl>

<dl class="attribute">
<dt id="kafe.function_tools.FitFunction.parameter_defaults">
<code class="descname">parameter_defaults</code><em class="property"> = None</em><a class="headerlink" href="#kafe.function_tools.FitFunction.parameter_defaults" title="Permalink to this definition">¶</a></dt>
<dd><p>The default values of the parameters</p>
</dd></dl>

<dl class="attribute">
<dt id="kafe.function_tools.FitFunction.parameter_names">
<code class="descname">parameter_names</code><em class="property"> = None</em><a class="headerlink" href="#kafe.function_tools.FitFunction.parameter_names" title="Permalink to this definition">¶</a></dt>
<dd><p>The names of the parameters</p>
</dd></dl>

<dl class="attribute">
<dt id="kafe.function_tools.FitFunction.x_name">
<code class="descname">x_name</code><em class="property"> = None</em><a class="headerlink" href="#kafe.function_tools.FitFunction.x_name" title="Permalink to this definition">¶</a></dt>
<dd><p>The name given to the independent variable</p>
</dd></dl>

</dd></dl>

<dl class="function">
<dt id="kafe.function_tools.LaTeX">
<code class="descclassname">kafe.function_tools.</code><code class="descname">LaTeX</code><span class="sig-paren">(</span><em>**kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#kafe.function_tools.LaTeX" title="Permalink to this definition">¶</a></dt>
<dd><p>Optional decorator for fit functions. This overrides a FitFunction&#8217;s
<cite>latex_</cite> attributes. The new values for the <cite>latex_</cite> attributes must be
passed as keyword arguments to the decorator. Possible arguments:</p>
<dl class="docutils">
<dt><em>name</em> <span class="classifier-delimiter">:</span> <span class="classifier">string</span></dt>
<dd><img class="math" src="_images/math/a7232b593ed37730342f85e75263e83d0dd59863.png" alt="LaTeX"/> representation of the function name.</dd>
<dt><em>parameter_names</em> <span class="classifier-delimiter">:</span> <span class="classifier">list of strings</span></dt>
<dd>List of <img class="math" src="_images/math/a7232b593ed37730342f85e75263e83d0dd59863.png" alt="LaTeX"/> representations of the function&#8217;s arguments.
The length of this list must be equal to the function&#8217;s argument
number. The argument names should be in the same order as in the
function definition.</dd>
<dt><em>x_name</em> <span class="classifier-delimiter">:</span> <span class="classifier">string</span></dt>
<dd><img class="math" src="_images/math/a7232b593ed37730342f85e75263e83d0dd59863.png" alt="LaTeX"/> representation of the independent variable&#8217;s name.</dd>
<dt><em>expression</em> <span class="classifier-delimiter">:</span> <span class="classifier">string</span></dt>
<dd><img class="math" src="_images/math/a7232b593ed37730342f85e75263e83d0dd59863.png" alt="LaTeX"/>-formatted expression representing the
function&#8217;s formula.</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="kafe.function_tools.derivative">
<code class="descclassname">kafe.function_tools.</code><code class="descname">derivative</code><span class="sig-paren">(</span><em>func</em>, <em>derive_by_index</em>, <em>variables_tuple</em>, <em>derivative_spacing</em><span class="sig-paren">)</span><a class="headerlink" href="#kafe.function_tools.derivative" title="Permalink to this definition">¶</a></dt>
<dd><p>Gives <img class="math" src="_images/math/75fd92bdcc1b7b766b736eb4ade096923966b452.png" alt="\frac{\partial f}{\partial x_k}"/> for <img class="math" src="_images/math/df1eae237d19d549a37f0c38719a9b3e6fa8c2e0.png" alt="f = f(x_0, x_1,
\ldots)"/>. <cite>func</cite> is <img class="math" src="_images/math/0001d02b63ede2fe3219e05a7cd09c82ae6298b6.png" alt="f"/>, <cite>variables_tuple</cite> is <img class="math" src="_images/math/a45986d436cbbd4ba3cb9da875dde8738eb9811d.png" alt="\{x_i\}"/> and
<cite>derive_by_index</cite> is <img class="math" src="_images/math/e9203da50e1059455123460d4e716c9c7f440cc3.png" alt="k"/>.</p>
</dd></dl>

<dl class="function">
<dt id="kafe.function_tools.outer_product">
<code class="descclassname">kafe.function_tools.</code><code class="descname">outer_product</code><span class="sig-paren">(</span><em>input_array</em><span class="sig-paren">)</span><a class="headerlink" href="#kafe.function_tools.outer_product" title="Permalink to this definition">¶</a></dt>
<dd><p>Takes a <cite>NumPy</cite> array and returns the outer (dyadic, Kronecker) product
with itself. If <cite>input_array</cite> is a vector <img class="math" src="_images/math/46aec6aaff80d183cc0ed35d77ce75c7c9ffd174.png" alt="\mathbf{x}"/>, this returns
<img class="math" src="_images/math/3115c9dbd73921a3790722f34d3e69b8e64e5306.png" alt="\mathbf{x}\mathbf{x}^T"/>.</p>
</dd></dl>

</div>
<div class="section" id="module-kafe.latex_tools">
<span id="for-working-with-latex-strings-kafe-latex-tools"></span><h3>For working with LaTeX strings (<a class="reference internal" href="#module-kafe.latex_tools" title="kafe.latex_tools"><code class="xref py py-mod docutils literal"><span class="pre">kafe.latex_tools</span></code></a>)<a class="headerlink" href="#module-kafe.latex_tools" title="Permalink to this headline">¶</a></h3>
<span class="target" id="module-latex_tools"></span><dl class="function">
<dt id="kafe.latex_tools.ascii_to_latex_math">
<code class="descclassname">kafe.latex_tools.</code><code class="descname">ascii_to_latex_math</code><span class="sig-paren">(</span><em>str_ascii</em>, <em>monospace=True</em>, <em>ensuremath=True</em><span class="sig-paren">)</span><a class="headerlink" href="#kafe.latex_tools.ascii_to_latex_math" title="Permalink to this definition">¶</a></dt>
<dd><p>Escapes certain characters in an ASCII input string so that the result
can be included in math mode without error.</p>
<dl class="docutils">
<dt><strong>str_ascii</strong> <span class="classifier-delimiter">:</span> <span class="classifier">string</span></dt>
<dd>A plain-text string containing characters to be escaped for
<img class="math" src="_images/math/a7232b593ed37730342f85e75263e83d0dd59863.png" alt="LaTeX"/> math mode.</dd>
<dt><em>monospace</em> <span class="classifier-delimiter">:</span> <span class="classifier">boolean (optional)</span></dt>
<dd>Whether to render the whole expression as monospace. Defaults to
<code class="docutils literal"><span class="pre">True</span></code>.</dd>
<dt><em>ensuremath</em> <span class="classifier-delimiter">:</span> <span class="classifier">boolean (optional)</span></dt>
<dd>If this is <code class="docutils literal"><span class="pre">True</span></code>, the resulting formula is wrapped in
an <code class="docutils literal"><span class="pre">\ensuremath{}</span></code> tag. Defaults to <code class="docutils literal"><span class="pre">True</span></code>.</dd>
</dl>
</dd></dl>

</div>
<div class="section" id="module-kafe.numeric_tools">
<span id="for-routine-numeric-tasks-kafe-numeric-tools"></span><h3>For routine numeric tasks (<a class="reference internal" href="#module-kafe.numeric_tools" title="kafe.numeric_tools"><code class="xref py py-mod docutils literal"><span class="pre">kafe.numeric_tools</span></code></a>)<a class="headerlink" href="#module-kafe.numeric_tools" title="Permalink to this headline">¶</a></h3>
<span class="target" id="module-numeric_tools"></span><dl class="function">
<dt id="kafe.numeric_tools.MinuitCov_to_cor">
<code class="descclassname">kafe.numeric_tools.</code><code class="descname">MinuitCov_to_cor</code><span class="sig-paren">(</span><em>cov_mat</em><span class="sig-paren">)</span><a class="headerlink" href="#kafe.numeric_tools.MinuitCov_to_cor" title="Permalink to this definition">¶</a></dt>
<dd><p>Converts a covariance matrix as returned by Minuit to the
corresponding correlation matrix; note that the Minuit
covariance matrix may contain lines/rows with zeroes if
parameters are fixed</p>
<dl class="docutils">
<dt><strong>cov_mat</strong> <span class="classifier-delimiter">:</span> <span class="classifier"><cite>numpy.matrix</cite></span></dt>
<dd>The Minuit covariance matrix to convert.</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="kafe.numeric_tools.cor_to_cov">
<code class="descclassname">kafe.numeric_tools.</code><code class="descname">cor_to_cov</code><span class="sig-paren">(</span><em>cor_mat</em>, <em>error_list</em><span class="sig-paren">)</span><a class="headerlink" href="#kafe.numeric_tools.cor_to_cov" title="Permalink to this definition">¶</a></dt>
<dd><p>Converts a correlation matrix to a covariance matrix according to the
formula</p>
<div class="math">
<p><img src="_images/math/e183c7bb94f5b2cb7f1ee8a10b032ca48cce3a34.png" alt="\text{Cov}_{ij} = \text{Cor}_{ij}\, \sigma_i \, \sigma_j"/></p>
</div><dl class="docutils">
<dt><strong>cor_mat</strong> <span class="classifier-delimiter">:</span> <span class="classifier"><cite>numpy.matrix</cite></span></dt>
<dd>The correlation matrix to convert.</dd>
<dt><strong>error_list</strong> <span class="classifier-delimiter">:</span> <span class="classifier">sequence of floats</span></dt>
<dd>A sequence of statistical errors. Must be of the same length
as the diagonal of <cite>cor_mat</cite>.</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="kafe.numeric_tools.cov_to_cor">
<code class="descclassname">kafe.numeric_tools.</code><code class="descname">cov_to_cor</code><span class="sig-paren">(</span><em>cov_mat</em><span class="sig-paren">)</span><a class="headerlink" href="#kafe.numeric_tools.cov_to_cor" title="Permalink to this definition">¶</a></dt>
<dd><p>Converts a covariance matrix to a correlation matrix according to the
formula</p>
<div class="math">
<p><img src="_images/math/5fde4713fce5aa5d90b3fe0ce69c583fd8aa7f85.png" alt="\text{Cor}_{ij} = \frac{\text{Cov}_{ij}}
    {\sqrt{ \text{Cov}_{ii}\,\text{Cov}_{jj}}}"/></p>
</div><dl class="docutils">
<dt><strong>cov_mat</strong> <span class="classifier-delimiter">:</span> <span class="classifier"><cite>numpy.matrix</cite></span></dt>
<dd>The covariance matrix to convert.</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="kafe.numeric_tools.extract_statistical_errors">
<code class="descclassname">kafe.numeric_tools.</code><code class="descname">extract_statistical_errors</code><span class="sig-paren">(</span><em>cov_mat</em><span class="sig-paren">)</span><a class="headerlink" href="#kafe.numeric_tools.extract_statistical_errors" title="Permalink to this definition">¶</a></dt>
<dd><p>Extracts the statistical errors from a covariance matrix. This means
it returns the (elementwise) square root of the diagonal entries</p>
<dl class="docutils">
<dt><strong>cov_mat</strong></dt>
<dd>The covariance matrix to extract errors from. Type: <cite>numpy.matrix</cite></dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="kafe.numeric_tools.make_symmetric_lower">
<code class="descclassname">kafe.numeric_tools.</code><code class="descname">make_symmetric_lower</code><span class="sig-paren">(</span><em>mat</em><span class="sig-paren">)</span><a class="headerlink" href="#kafe.numeric_tools.make_symmetric_lower" title="Permalink to this definition">¶</a></dt>
<dd><p>Copies the matrix entries below the main diagonal to the upper triangle
half of the matrix. Leaves the diagonal unchanged. Returns a <cite>NumPy</cite> matrix
object.</p>
<dl class="docutils">
<dt><strong>mat</strong> <span class="classifier-delimiter">:</span> <span class="classifier"><cite>numpy.matrix</cite></span></dt>
<dd>A lower diagonal matrix.</dd>
<dt>returns <span class="classifier-delimiter">:</span> <span class="classifier"><cite>numpy.matrix</cite></span></dt>
<dd>The lower triangle matrix.</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="kafe.numeric_tools.zero_pad_lower_triangle">
<code class="descclassname">kafe.numeric_tools.</code><code class="descname">zero_pad_lower_triangle</code><span class="sig-paren">(</span><em>triangle_list</em><span class="sig-paren">)</span><a class="headerlink" href="#kafe.numeric_tools.zero_pad_lower_triangle" title="Permalink to this definition">¶</a></dt>
<dd><p>Converts a list of lists into a lower triangle matrix. The list members
should be lists of increasing length from 1 to N, N being the dimension of
the resulting lower triangle matrix. Returns a <cite>NumPy</cite> matrix object.</p>
<p>For example:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">zero_pad_lower_triangle</span><span class="p">([</span> <span class="p">[</span><span class="mf">1.0</span><span class="p">],</span> <span class="p">[</span><span class="mf">0.2</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">],</span> <span class="p">[</span><span class="mf">0.01</span><span class="p">,</span> <span class="mf">0.4</span><span class="p">,</span> <span class="mf">3.0</span><span class="p">]</span> <span class="p">])</span>
<span class="go">matrix([[ 1.  ,  0.  ,  0.  ],</span>
<span class="go">        [ 0.2 ,  1.  ,  0.  ],</span>
<span class="go">        [ 0.01,  0.4 ,  3.  ]])</span>
</pre></div>
</div>
<dl class="docutils">
<dt><strong>triangle_list</strong> <span class="classifier-delimiter">:</span> <span class="classifier">list</span></dt>
<dd>A list containing lists of increasing length.</dd>
<dt>returns <span class="classifier-delimiter">:</span> <span class="classifier"><cite>numpy.matrix</cite></span></dt>
<dd>The lower triangle matrix.</dd>
</dl>
</dd></dl>

</div>
</div>
<div class="section" id="auxilliary-modules">
<h2>Auxilliary modules<a class="headerlink" href="#auxilliary-modules" title="Permalink to this headline">¶</a></h2>
<div class="section" id="module-kafe.function_library">
<span id="collection-of-ready-to-use-fit-functions-kafe-function-library"></span><h3>Collection of ready-to-use fit functions (<a class="reference internal" href="#module-kafe.function_library" title="kafe.function_library"><code class="xref py py-mod docutils literal"><span class="pre">kafe.function_library</span></code></a>)<a class="headerlink" href="#module-kafe.function_library" title="Permalink to this headline">¶</a></h3>
<span class="target" id="module-function_library"></span><p>Collection of model functions</p>
</div>
<div class="section" id="module-kafe.stream">
<span id="file-stream-manipulation-kafe-stream"></span><h3>File/stream manipulation (<a class="reference internal" href="#module-kafe.stream" title="kafe.stream"><code class="xref py py-mod docutils literal"><span class="pre">kafe.stream</span></code></a>)<a class="headerlink" href="#module-kafe.stream" title="Permalink to this headline">¶</a></h3>
<span class="target" id="module-stream"></span><dl class="class">
<dt id="kafe.stream.StreamDup">
<em class="property">class </em><code class="descclassname">kafe.stream.</code><code class="descname">StreamDup</code><span class="sig-paren">(</span><em>out_file</em>, <em>suppress_stdout=False</em><span class="sig-paren">)</span><a class="headerlink" href="#kafe.stream.StreamDup" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal"><span class="pre">object</span></code></p>
<p>Object for simultaneous logging to stdout and files.
This object provides a file/like object for the outout to be written to.
Writing to this object will write to stdout (usually the console) and to
a file.</p>
<dl class="docutils">
<dt><strong>out_file</strong> <span class="classifier-delimiter">:</span> <span class="classifier">file path or file-like object or list of file paths ...</span></dt>
<dd>File(s) to which to log the output, along with stdout. If a file exists
on disk, it will be appended to.</dd>
<dt><em>suppress_stdout</em> <span class="classifier-delimiter">:</span> <span class="classifier">boolean</span></dt>
<dd>Whether to log to stdout simultaneously (<code class="docutils literal"><span class="pre">False</span></code>) or suppress output
to stdout (<code class="docutils literal"><span class="pre">True</span></code>). Default to <code class="docutils literal"><span class="pre">False</span></code>.</dd>
</dl>
<dl class="method">
<dt id="kafe.stream.StreamDup.fileno">
<code class="descname">fileno</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#kafe.stream.StreamDup.fileno" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the file handler id of the main (first) output file.</p>
</dd></dl>

<dl class="method">
<dt id="kafe.stream.StreamDup.flush">
<code class="descname">flush</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#kafe.stream.StreamDup.flush" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="kafe.stream.StreamDup.write">
<code class="descname">write</code><span class="sig-paren">(</span><em>message</em><span class="sig-paren">)</span><a class="headerlink" href="#kafe.stream.StreamDup.write" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="kafe.stream.StreamDup.write_timestamp">
<code class="descname">write_timestamp</code><span class="sig-paren">(</span><em>prefix</em><span class="sig-paren">)</span><a class="headerlink" href="#kafe.stream.StreamDup.write_timestamp" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="kafe.stream.StreamDup.write_to_file">
<code class="descname">write_to_file</code><span class="sig-paren">(</span><em>message</em><span class="sig-paren">)</span><a class="headerlink" href="#kafe.stream.StreamDup.write_to_file" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="kafe.stream.StreamDup.write_to_stdout">
<code class="descname">write_to_stdout</code><span class="sig-paren">(</span><em>message</em>, <em>check_if_suppressed=False</em><span class="sig-paren">)</span><a class="headerlink" href="#kafe.stream.StreamDup.write_to_stdout" title="Permalink to this definition">¶</a></dt>
<dd><p>Explicitly write to stdout. This method will not check by default
whether <code class="docutils literal"><span class="pre">suppress_stdout</span></code> is set for this <cite>StreamDup</cite>. If
<code class="docutils literal"><span class="pre">check_if_suppressed</span></code> is explicitly set to <code class="docutils literal"><span class="pre">True</span></code>, then this
check occurs.</p>
</dd></dl>

</dd></dl>

</div>
</div>
</div>


           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
      
        <a href="examples.html" class="btn btn-neutral" title="Fit examples, utilities, tips and tricks" accesskey="p"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2015, D. Savoiu, G. Quast.
      Last updated on Oct 16, 2016.
    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'./',
            VERSION:'1.2.0',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true
        };
    </script>
      <script type="text/javascript" src="_static/jquery.js"></script>
      <script type="text/javascript" src="_static/underscore.js"></script>
      <script type="text/javascript" src="_static/doctools.js"></script>

  

  
  
    <script type="text/javascript" src="_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
  
     
    <!-- <div class="footer">
        © Copyright 2013, Daniel Savoiu.
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.1.3.
    </div>-->


</body>
</html>